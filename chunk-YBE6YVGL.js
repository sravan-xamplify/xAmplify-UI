import{A as ii}from"./chunk-7IEGBUCH.js";import{Ca as Qn,Da as Kn,Ma as Zn,Wa as te,Xa as Jn,_a as ei,hc as ti,ic as ri,jc as ni,sa as $n,zb as rr}from"./chunk-7QP7SMW2.js";import{a as tr,b as kn,e as Gu,g as Xn}from"./chunk-66YHNWRR.js";var nr=Gu((It,oi)=>{"use strict";(function(C,ge){typeof It=="object"&&typeof oi<"u"?ge(It):typeof define=="function"&&define.amd?define(["exports"],ge):(C=C||self,ge(C.FilePond={}))})(It,function(C){"use strict";var ge=function(e){return e instanceof HTMLElement},X=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=Object.assign({},e),o=[],a=[],s=function(){return Object.assign({},n)},u=function(){var v=[].concat(o);return o.length=0,v},l=function(){var v=[].concat(a);a.length=0,v.forEach(function(_){var S=_.type,P=_.data;c(S,P)})},c=function(v,_,S){if(S&&!document.hidden){a.push({type:v,data:_});return}m[v]&&m[v](_),o.push({type:v,data:_})},f=function(v){for(var _,S=arguments.length,P=new Array(S>1?S-1:0),h=1;h<S;h++)P[h-1]=arguments[h];return E[v]?(_=E)[v].apply(_,P):null},d={getState:s,processActionQueue:u,processDispatchQueue:l,dispatch:c,query:f},E={};t.forEach(function(I){E=Object.assign({},I(n),{},E)});var m={};return r.forEach(function(I){m=Object.assign({},I(c,f,n),{},m)}),d},me=function(e,t,r){if(typeof r=="function"){e[t]=r;return}Object.defineProperty(e,t,Object.assign({},r))},U=function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])},ue=function(e){var t={};return U(e,function(r){me(t,r,e[r])}),t},J=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(r===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},si="http://www.w3.org/2000/svg",ui=["svg","path"],ir=function(e){return ui.includes(e)},Qe=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};typeof t=="object"&&(r=t,t=null);var n=ir(e)?document.createElementNS(si,e):document.createElement(e);return t&&(ir(e)?J(n,"class",t):n.className=t),U(r,function(o,a){J(n,o,a)}),n},li=function(e){return function(t,r){typeof r<"u"&&e.children[r]?e.insertBefore(t,e.children[r]):e.appendChild(t)}},ci=function(e,t){return function(r,n){return typeof n<"u"?t.splice(n,0,r):t.push(r),r}},fi=function(e,t){return function(r){return t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r}},di=function(){return typeof window<"u"&&typeof window.document<"u"}(),or=function(){return di},pi=or()?Qe("svg"):{},vi="children"in pi?function(i){return i.children.length}:function(i){return i.childNodes.length},ar=function(e,t,r,n){var o=r[0]||e.left,a=r[1]||e.top,s=o+e.width,u=a+e.height*(n[1]||1),l={element:Object.assign({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:a,right:s,bottom:u}};return t.filter(function(c){return!c.isRectIgnored()}).map(function(c){return c.rect}).forEach(function(c){sr(l.inner,Object.assign({},c.inner)),sr(l.outer,Object.assign({},c.outer))}),ur(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,ur(l.outer),l},sr=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},ur=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},ye=function(e){return typeof e=="number"},Ei=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.001;return Math.abs(e-t)<n&&Math.abs(r)<n},gi=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiffness,r=t===void 0?.5:t,n=e.damping,o=n===void 0?.75:n,a=e.mass,s=a===void 0?10:a,u=null,l=null,c=0,f=!1,d=function(v,_){if(!f){if(!(ye(u)&&ye(l))){f=!0,c=0;return}var S=-(l-u)*r;c+=S/s,l+=c,c*=o,Ei(l,u,c)||_?(l=u,c=0,f=!0,m.onupdate(l),m.oncomplete(l)):m.onupdate(l)}},E=function(v){if(ye(v)&&!ye(l)&&(l=v),u===null&&(u=v,l=v),u=v,l===u||typeof u>"u"){f=!0,c=0,m.onupdate(l),m.oncomplete(l);return}f=!1},m=ue({interpolate:d,target:{set:E,get:function(){return u}},resting:{get:function(){return f}},onupdate:function(v){},oncomplete:function(v){}});return m},qu=function(e){return e},mi=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},Ii=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.duration,r=t===void 0?500:t,n=e.easing,o=n===void 0?mi:n,a=e.delay,s=a===void 0?0:a,u=null,l,c,f=!0,d=!1,E=null,m=function(_,S){f||E===null||(u===null&&(u=_),!(_-u<s)&&(l=_-u-s,l>=r||S?(l=1,c=d?0:1,I.onupdate(c*E),I.oncomplete(c*E),f=!0):(c=l/r,I.onupdate((l>=0?o(d?1-c:c):0)*E))))},I=ue({interpolate:m,target:{get:function(){return d?0:E},set:function(_){if(E===null){E=_,I.onupdate(_),I.oncomplete(_);return}_<E?(E=1,d=!0):(d=!1,E=_),f=!1,u=null}},resting:{get:function(){return f}},onupdate:function(_){},oncomplete:function(_){}});return I},lr={spring:gi,tween:Ii},Ti=function(e,t,r){var n=e[t]&&typeof e[t][r]=="object"?e[t][r]:e[t]||e,o=typeof n=="string"?n:n.type,a=typeof n=="object"?Object.assign({},n):{};return lr[o]?lr[o](a):null},_t=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;t=Array.isArray(t)?t:[t],t.forEach(function(o){e.forEach(function(a){var s=a,u=function(){return r[a]},l=function(f){return r[a]=f};typeof a=="object"&&(s=a.key,u=a.getter||u,l=a.setter||l),!(o[s]&&!n)&&(o[s]={get:u,set:l})})})},_i=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,o=e.viewExternalAPI,a=Object.assign({},r),s=[];return U(t,function(u,l){var c=Ti(l);if(c){c.onupdate=function(d){r[u]=d},c.target=a[u];var f={key:u,setter:function(E){c.target!==E&&(c.target=E)},getter:function(){return r[u]}};_t([f],[n,o],r,!0),s.push(c)}}),{write:function(l){var c=document.hidden,f=!0;return s.forEach(function(d){d.resting||(f=!1),d.interpolate(l,c)}),f},destroy:function(){}}},hi=function(e){return function(t,r){e.addEventListener(t,r)}},Ri=function(e){return function(t,r){e.removeEventListener(t,r)}},Oi=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,o=e.viewExternalAPI,a=e.viewState,s=e.view,u=[],l=hi(s.element),c=Ri(s.element);return o.on=function(f,d){u.push({type:f,fn:d}),l(f,d)},o.off=function(f,d){u.splice(u.findIndex(function(E){return E.type===f&&E.fn===d}),1),c(f,d)},{write:function(){return!0},destroy:function(){u.forEach(function(d){c(d.type,d.fn)})}}},yi=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewExternalAPI;_t(t,n,r)},ne=function(e){return e!=null},Si={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Di=function(e){var t=e.mixinConfig,r=e.viewProps,n=e.viewInternalAPI,o=e.viewExternalAPI,a=e.view,s=Object.assign({},r),u={};_t(t,[n,o],r);var l=function(){return[r.translateX||0,r.translateY||0]},c=function(){return[r.scaleX||0,r.scaleY||0]},f=function(){return a.rect?ar(a.rect,a.childViews,l(),c()):null};return n.rect={get:f},o.rect={get:f},t.forEach(function(d){r[d]=typeof s[d]>"u"?Si[d]:s[d]}),{write:function(){if(bi(u,r))return Pi(a.element,r),Object.assign(u,Object.assign({},r)),!0},destroy:function(){}}},bi=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var r in t)if(t[r]!==e[r])return!0;return!1},Pi=function(e,t){var r=t.opacity,n=t.perspective,o=t.translateX,a=t.translateY,s=t.scaleX,u=t.scaleY,l=t.rotateX,c=t.rotateY,f=t.rotateZ,d=t.originX,E=t.originY,m=t.width,I=t.height,v="",_="";(ne(d)||ne(E))&&(_+="transform-origin: "+(d||0)+"px "+(E||0)+"px;"),ne(n)&&(v+="perspective("+n+"px) "),(ne(o)||ne(a))&&(v+="translate3d("+(o||0)+"px, "+(a||0)+"px, 0) "),(ne(s)||ne(u))&&(v+="scale3d("+(ne(s)?s:1)+", "+(ne(u)?u:1)+", 1) "),ne(f)&&(v+="rotateZ("+f+"rad) "),ne(l)&&(v+="rotateX("+l+"rad) "),ne(c)&&(v+="rotateY("+c+"rad) "),v.length&&(_+="transform:"+v+";"),ne(r)&&(_+="opacity:"+r+";",r===0&&(_+="visibility:hidden;"),r<1&&(_+="pointer-events:none;")),ne(I)&&(_+="height:"+I+"px;"),ne(m)&&(_+="width:"+m+"px;");var S=e.elementCurrentStyle||"";(_.length!==S.length||_!==S)&&(e.style.cssText=_,e.elementCurrentStyle=_)},Ai={styles:Di,listeners:Oi,animations:_i,apis:yi},cr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e},Z=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.tag,r=t===void 0?"div":t,n=e.name,o=n===void 0?null:n,a=e.attributes,s=a===void 0?{}:a,u=e.read,l=u===void 0?function(){}:u,c=e.write,f=c===void 0?function(){}:c,d=e.create,E=d===void 0?function(){}:d,m=e.destroy,I=m===void 0?function(){}:m,v=e.filterFrameActionsForChild,_=v===void 0?function(O,D){return D}:v,S=e.didCreateView,P=S===void 0?function(){}:S,h=e.didWriteView,G=h===void 0?function(){}:h,R=e.ignoreRect,H=R===void 0?!1:R,z=e.ignoreRectUpdate,y=z===void 0?!1:z,A=e.mixins,w=A===void 0?[]:A;return function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=Qe(r,"filepond--"+o,s),W=window.getComputedStyle(L,null),Y=cr(),M=null,T=!1,p=[],b=[],F={},B={},V=[f],q=[l],k=[I],$=function(){return L},xe=function(){return p.concat()},Yn=function(){return F},Au=function(x){return function(_e,he){return _e(x,he)}},Hn=function(){return M||(M=ar(Y,p,[0,0],[1,1]),M)},wu=function(){return W},Lu=function(){M=null,p.forEach(function(he){return he._read()});var x=!(y&&Y.width&&Y.height);x&&cr(Y,L,W);var _e={root:Oe,props:D,rect:Y};q.forEach(function(he){return he(_e)})},Mu=function(x,_e,he){var qe=_e.length===0;return V.forEach(function(se){var Ce=se({props:D,root:Oe,actions:_e,timestamp:x,shouldOptimize:he});Ce===!1&&(qe=!1)}),b.forEach(function(se){var Ce=se.write(x);Ce===!1&&(qe=!1)}),p.filter(function(se){return!!se.element.parentNode}).forEach(function(se){var Ce=se._write(x,_(se,_e),he);Ce||(qe=!1)}),p.forEach(function(se,Ce){se.element.parentNode||(Oe.appendChild(se.element,Ce),se._read(),se._write(x,_(se,_e),he),qe=!1)}),T=qe,G({props:D,root:Oe,actions:_e,timestamp:x}),qe},Cu=function(){b.forEach(function(x){return x.destroy()}),k.forEach(function(x){x({root:Oe,props:D})}),p.forEach(function(x){return x._destroy()})},zn={element:{get:$},style:{get:wu},childViews:{get:xe}},Wn=Object.assign({},zn,{rect:{get:Hn},ref:{get:Yn},is:function(x){return o===x},appendChild:li(L),createChildView:Au(O),linkView:function(x){return p.push(x),x},unlinkView:function(x){p.splice(p.indexOf(x),1)},appendChildView:ci(L,p),removeChildView:fi(L,p),registerWriter:function(x){return V.push(x)},registerReader:function(x){return q.push(x)},registerDestroyer:function(x){return k.push(x)},invalidateLayout:function(){return L.layoutCalculated=!1},dispatch:O.dispatch,query:O.query}),jn={element:{get:$},childViews:{get:xe},rect:{get:Hn},resting:{get:function(){return T}},isRectIgnored:function(){return H},_read:Lu,_write:Mu,_destroy:Cu},Nu=Object.assign({},zn,{rect:{get:function(){return Y}}});Object.keys(w).sort(function(j,x){return j==="styles"?1:x==="styles"?-1:0}).forEach(function(j){var x=Ai[j]({mixinConfig:w[j],viewProps:D,viewState:B,viewInternalAPI:Wn,viewExternalAPI:jn,view:ue(Nu)});x&&b.push(x)});var Oe=ue(Wn);E({root:Oe,props:D});var Fu=vi(L);return p.forEach(function(j,x){Oe.appendChild(j.element,Fu+x)}),P(Oe),ue(jn)}},wi=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:60,n="__framePainter";if(window[n]){window[n].readers.push(e),window[n].writers.push(t);return}window[n]={readers:[e],writers:[t]};var o=window[n],a=1e3/r,s=null,u=null,l=null,c=null,f=function(){document.hidden?(l=function(){return window.setTimeout(function(){return d(performance.now())},a)},c=function(){return window.clearTimeout(u)}):(l=function(){return window.requestAnimationFrame(d)},c=function(){return window.cancelAnimationFrame(u)})};document.addEventListener("visibilitychange",function(){c&&c(),f(),d(performance.now())});var d=function E(m){u=l(E),s||(s=m);var I=m-s;I<=a||(s=m-I%a,o.readers.forEach(function(v){return v()}),o.writers.forEach(function(v){return v(m)}))};return f(),d(performance.now()),{pause:function(){c(u)}}},ie=function(e,t){return function(r){var n=r.root,o=r.props,a=r.actions,s=a===void 0?[]:a,u=r.timestamp,l=r.shouldOptimize;s.filter(function(c){return e[c.type]}).forEach(function(c){return e[c.type]({root:n,props:o,action:c.data,timestamp:u,shouldOptimize:l})}),t&&t({root:n,props:o,actions:s,timestamp:u,shouldOptimize:l})}},fr=function(e,t){return t.parentNode.insertBefore(e,t)},dr=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},Ke=function(e){return Array.isArray(e)},Ie=function(e){return e==null},Li=function(e){return e.trim()},Ze=function(e){return""+e},Mi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return Ie(e)?[]:Ke(e)?e:Ze(e).split(t).map(Li).filter(function(r){return r.length})},pr=function(e){return typeof e=="boolean"},vr=function(e){return pr(e)?e:e==="true"},oe=function(e){return typeof e=="string"},Er=function(e){return ye(e)?e:oe(e)?Ze(e).replace(/[a-z]+/gi,""):0},Je=function(e){return parseInt(Er(e),10)},gr=function(e){return parseFloat(Er(e))},Ne=function(e){return ye(e)&&isFinite(e)&&Math.floor(e)===e},mr=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(Ne(e))return e;var r=Ze(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),Je(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),Je(r)*t):Je(r)},Se=function(e){return typeof e=="function"},Ci=function(e){for(var t=self,r=e.split("."),n=null;n=r.shift();)if(t=t[n],!t)return null;return t},Ir={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Ni=function(e){var t={};return t.url=oe(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},U(Ir,function(r){t[r]=Fi(r,e[r],Ir[r],t.timeout,t.headers)}),t.process=e.process||oe(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Fi=function(e,t,r,n,o){if(t===null)return null;if(typeof t=="function")return t;var a={url:r==="GET"||r==="PATCH"?"?"+e+"=":"",method:r,headers:o,withCredentials:!1,timeout:n,onload:null,ondata:null,onerror:null};if(oe(t))return a.url=t,a;if(Object.assign(a,t),oe(a.headers)){var s=a.headers.split(/:(.+)/);a.headers={header:s[0],value:s[1]}}return a.withCredentials=vr(a.withCredentials),a},Gi=function(e){return Ni(e)},Bi=function(e){return e===null},re=function(e){return typeof e=="object"&&e!==null},Ui=function(e){return re(e)&&oe(e.url)&&re(e.process)&&re(e.revert)&&re(e.restore)&&re(e.fetch)},ht=function(e){return Ke(e)?"array":Bi(e)?"null":Ne(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Ui(e)?"api":typeof e},Vi=function(e){return e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},xi={array:Mi,boolean:vr,int:function(e){return ht(e)==="bytes"?mr(e):Je(e)},number:gr,float:gr,bytes:mr,string:function(e){return Se(e)?e:Ze(e)},function:function(e){return Ci(e)},serverapi:Gi,object:function(e){try{return JSON.parse(Vi(e))}catch{return null}}},qi=function(e,t){return xi[t](e)},Tr=function(e,t,r){if(e===t)return e;var n=ht(e);if(n!==r){var o=qi(e,r);if(n=ht(o),o===null)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+r+'"';e=o}return e},Yi=function(e,t){var r=e;return{enumerable:!0,get:function(){return r},set:function(o){r=Tr(o,e,t)}}},Hi=function(e){var t={};return U(e,function(r){var n=e[r];t[r]=Yi(n[0],n[1])}),ue(t)},zi=function(e){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Hi(e)}},et=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return e.split(/(?=[A-Z])/).map(function(r){return r.toLowerCase()}).join(t)},Wi=function(e,t){var r={};return U(t,function(n){r[n]={get:function(){return e.getState().options[n]},set:function(a){e.dispatch("SET_"+et(n,"_").toUpperCase(),{value:a})}}}),r},ji=function(e){return function(t,r,n){var o={};return U(e,function(a){var s=et(a,"_").toUpperCase();o["SET_"+s]=function(u){try{n.options[a]=u.value}catch{}t("DID_SET_"+s,{value:n.options[a]})}}),o}},ki=function(e){return function(t){var r={};return U(e,function(n){r["GET_"+et(n,"_").toUpperCase()]=function(o){return t.options[n]}}),r}},ce={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Rt=function(){return Math.random().toString(36).substring(2,11)};function Ot(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ot=function(e){return typeof e}:Ot=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(i)}var yt;function Yu(i,e,t,r){yt||(yt=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103);var n=i&&i.defaultProps,o=arguments.length-3;if(!e&&o!==0&&(e={children:void 0}),e&&n)for(var a in n)e[a]===void 0&&(e[a]=n[a]);else e||(e=n||{});if(o===1)e.children=r;else if(o>1){for(var s=new Array(o),u=0;u<o;u++)s[u]=arguments[u+3];e.children=s}return{$$typeof:yt,type:i,key:t===void 0?null:""+t,ref:null,props:e,_owner:null}}function Hu(i){var e;if(typeof Symbol<"u"&&(Symbol.asyncIterator&&(e=i[Symbol.asyncIterator],e!=null)||Symbol.iterator&&(e=i[Symbol.iterator],e!=null)))return e.call(i);throw new TypeError("Object is not async iterable")}function _r(i){this.wrapped=i}function Ye(i){var e,t;function r(a,s){return new Promise(function(u,l){var c={key:a,arg:s,resolve:u,reject:l,next:null};t?t=t.next=c:(e=t=c,n(a,s))})}function n(a,s){try{var u=i[a](s),l=u.value,c=l instanceof _r;Promise.resolve(c?l.wrapped:l).then(function(f){if(c){n("next",f);return}o(u.done?"return":"normal",f)},function(f){n("throw",f)})}catch(f){o("throw",f)}}function o(a,s){switch(a){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1});break}e=e.next,e?n(e.key,e.arg):t=null}this._invoke=r,typeof i.return!="function"&&(this.return=void 0)}typeof Symbol=="function"&&Symbol.asyncIterator&&(Ye.prototype[Symbol.asyncIterator]=function(){return this}),Ye.prototype.next=function(i){return this._invoke("next",i)},Ye.prototype.throw=function(i){return this._invoke("throw",i)},Ye.prototype.return=function(i){return this._invoke("return",i)};function zu(i){return function(){return new Ye(i.apply(this,arguments))}}function Wu(i){return new _r(i)}function ju(i,e){var t={},r=!1;function n(o,a){return r=!0,a=new Promise(function(s){s(i[o](a))}),{done:!1,value:e(a)}}return typeof Symbol=="function"&&Symbol.iterator&&(t[Symbol.iterator]=function(){return this}),t.next=function(o){return r?(r=!1,o):n("next",o)},typeof i.throw=="function"&&(t.throw=function(o){if(r)throw r=!1,o;return n("throw",o)}),typeof i.return=="function"&&(t.return=function(o){return n("return",o)}),t}function hr(i,e,t,r,n,o,a){try{var s=i[o](a),u=s.value}catch(l){t(l);return}s.done?e(u):Promise.resolve(u).then(r,n)}function ku(i){return function(){var e=this,t=arguments;return new Promise(function(r,n){var o=i.apply(e,t);function a(u){hr(o,r,n,a,s,"next",u)}function s(u){hr(o,r,n,a,s,"throw",u)}a(void 0)})}}function Xu(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Rr(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function $u(i,e,t){return e&&Rr(i.prototype,e),t&&Rr(i,t),i}function Qu(i,e){for(var t in e){var r=e[t];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,t,r)}if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o++){var a=n[o],r=e[a];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,a,r)}return i}function Ku(i,e){for(var t=Object.getOwnPropertyNames(e),r=0;r<t.length;r++){var n=t[r],o=Object.getOwnPropertyDescriptor(e,n);o&&o.configurable&&i[n]===void 0&&Object.defineProperty(i,n,o)}return i}function St(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Or(){return Or=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Or.apply(this,arguments)}function Zu(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.forEach(function(n){St(i,n,t[n])})}return i}function yr(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function Ju(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yr(t,!0).forEach(function(r){St(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):yr(t).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function Xi(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&He(i,e)}function el(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function tt(i){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(i)}function He(i,e){return He=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},He(i,e)}function $i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function rt(i,e,t){return $i()?rt=Reflect.construct:rt=function(n,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(n,s),l=new u;return a&&He(l,a.prototype),l},rt.apply(null,arguments)}function Qi(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function Dt(i){var e=typeof Map=="function"?new Map:void 0;return Dt=function(r){if(r===null||!Qi(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,n)}function n(){return rt(r,arguments,tt(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),He(n,r)},Dt(i)}function tl(i,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](i):i instanceof e}function rl(i){return i&&i.__esModule?i:{default:i}}function nl(i){if(i&&i.__esModule)return i;var e={};if(i!=null){for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(i,t):{};r.get||r.set?Object.defineProperty(e,t,r):e[t]=i[t]}}return e.default=i,e}function il(i,e){if(i!==e)throw new TypeError("Cannot instantiate an arrow function")}function ol(i){if(i==null)throw new TypeError("Cannot destructure undefined")}function Ki(i,e){if(i==null)return{};var t={},r=Object.keys(i),n,o;for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&(t[n]=i[n]);return t}function Zi(i,e){if(i==null)return{};var t=Ki(i,e),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)r=o[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(t[r]=i[r])}return t}function Ji(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function al(i,e){return e&&(typeof e=="object"||typeof e=="function")?e:Ji(i)}function Sr(i,e){for(;!Object.prototype.hasOwnProperty.call(i,e)&&(i=tt(i),i!==null););return i}function bt(i,e,t){return typeof Reflect<"u"&&Reflect.get?bt=Reflect.get:bt=function(n,o,a){var s=Sr(n,o);if(s){var u=Object.getOwnPropertyDescriptor(s,o);return u.get?u.get.call(a):u.value}},bt(i,e,t||i)}function nt(i,e,t,r){return typeof Reflect<"u"&&Reflect.set?nt=Reflect.set:nt=function(o,a,s,u){var l=Sr(o,a),c;if(l){if(c=Object.getOwnPropertyDescriptor(l,a),c.set)return c.set.call(u,s),!0;if(!c.writable)return!1}if(c=Object.getOwnPropertyDescriptor(u,a),c){if(!c.writable)return!1;c.value=s,Object.defineProperty(u,a,c)}else St(u,a,s);return!0},nt(i,e,t,r)}function sl(i,e,t,r,n){var o=nt(i,e,t,r||i);if(!o&&n)throw new Error("failed to set property");return t}function ul(i,e){return e||(e=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(e)}}))}function ll(i,e){return e||(e=i.slice(0)),i.raw=e,i}function cl(i,e){if(i===eo)throw new ReferenceError(e+" is not defined - temporal dead zone");return i}function fl(i){throw new Error('"'+i+'" is read-only')}function dl(i){throw new Error('Class "'+i+'" cannot be referenced in computed property keys.')}var eo={};function pl(i,e){return Pt(i)||no(i,e)||At()}function vl(i,e){return Pt(i)||io(i,e)||At()}function to(i){return Pt(i)||Dr(i)||At()}function it(i){return ro(i)||Dr(i)||oo()}function ro(i){if(Array.isArray(i)){for(var e=0,t=new Array(i.length);e<i.length;e++)t[e]=i[e];return t}}function Pt(i){if(Array.isArray(i))return i}function Dr(i){if(Symbol.iterator in Object(i)||Object.prototype.toString.call(i)==="[object Arguments]")return Array.from(i)}function no(i,e){var t=[],r=!0,n=!1,o=void 0;try{for(var a=i[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(u){n=!0,o=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(n)throw o}}return t}function io(i,e){for(var t=[],r=i[Symbol.iterator](),n;!(n=r.next()).done&&(t.push(n.value),!(e&&t.length===e)););return t}function oo(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function At(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function El(i){return function(){var e=i.apply(this,arguments);return e.next(),e}}function ao(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function br(i){var e=ao(i,"string");return typeof e=="symbol"?e:String(e)}function gl(i,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function ml(i,e,t,r){t&&Object.defineProperty(i,e,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function Il(i,e,t,r,n){var o={};return Object.keys(r).forEach(function(a){o[a]=r[a]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(a,s){return s(i,e,a)||a},o),n&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(i,e,o),o=null),o}var so=0;function Tl(i){return"__private_"+so+++"_"+i}function _l(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}function hl(i,e){var t=e.get(i);if(!t)throw new TypeError("attempted to get private field on non-instance");return t.get?t.get.call(i):t.value}function Rl(i,e,t){var r=e.get(i);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(i,t);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=t}return t}function Ol(i,e){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");var t=e.get(i);if(t.set)return"__destrObj"in t||(t.__destrObj={set value(r){t.set.call(i,r)}}),t.__destrObj;if(!t.writable)throw new TypeError("attempted to set read only private field");return t}function yl(i,e,t){if(i!==e)throw new TypeError("Private static access of wrong provenance");return t.value}function Sl(i,e,t,r){if(i!==e)throw new TypeError("Private static access of wrong provenance");if(!t.writable)throw new TypeError("attempted to set read only private field");return t.value=r,r}function Dl(i,e,t){if(i!==e)throw new TypeError("Private static access of wrong provenance");return t}function bl(){throw new TypeError("attempted to set read only static private field")}function Pl(i,e,t,r){var n=Pr();if(r)for(var o=0;o<r.length;o++)n=r[o](n);var a=e(function(l){n.initializeInstanceElements(l,s.elements)},t),s=n.decorateClass(co(a.d.map(uo)),i);return n.initializeClassElements(a.F,s.elements),n.runClassFinishers(a.F,s.finishers)}function Pr(){Pr=function(){return i};var i={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach(function(r){t.forEach(function(n){n.kind===r&&n.placement==="own"&&this.defineClassElement(e,n)},this)},this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach(function(n){t.forEach(function(o){var a=o.placement;if(o.kind===n&&(a==="static"||a==="prototype")){var s=a==="static"?e:r;this.defineClassElement(s,o)}},this)},this)},defineClassElement:function(e,t){var r=t.descriptor;if(t.kind==="field"){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:n===void 0?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],o={static:[],prototype:[],own:[]};if(e.forEach(function(s){this.addElementPlacement(s,o)},this),e.forEach(function(s){if(!ze(s))return r.push(s);var u=this.decorateElement(s,o);r.push(u.element),r.push.apply(r,u.extras),n.push.apply(n,u.finishers)},this),!t)return{elements:r,finishers:n};var a=this.decorateConstructor(r,t);return n.push.apply(n,a.finishers),a.finishers=n,a},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&n.indexOf(e.key)!==-1)throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],o=e.decorators,a=o.length-1;a>=0;a--){var s=t[e.placement];s.splice(s.indexOf(e.key),1);var u=this.fromElementDescriptor(e),l=this.toElementFinisherExtras((0,o[a])(u)||u);e=l.element,this.addElementPlacement(e,t),l.finisher&&n.push(l.finisher);var c=l.extras;if(c){for(var f=0;f<c.length;f++)this.addElementPlacement(c[f],t);r.push.apply(r,c)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var o=this.fromClassDescriptor(e),a=this.toClassDescriptor((0,t[n])(o)||o);if(a.finisher!==void 0&&r.push(a.finisher),a.elements!==void 0){e=a.elements;for(var s=0;s<e.length-1;s++)for(var u=s+1;u<e.length;u++)if(e[s].key===e[u].key&&e[s].placement===e[u].placement)throw new TypeError("Duplicated element ("+e[s].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor},r={value:"Descriptor",configurable:!0};return Object.defineProperty(t,Symbol.toStringTag,r),e.kind==="field"&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(e!==void 0)return to(e).map(function(t){var r=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),r},this)},toElementDescriptor:function(e){var t=String(e.kind);if(t!=="method"&&t!=="field")throw new TypeError(`An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "`+t+'"');var r=br(e.key),n=String(e.placement);if(n!=="static"&&n!=="prototype"&&n!=="own")throw new TypeError(`An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "`+n+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var a={kind:t,key:r,placement:n,descriptor:Object.assign({},o)};return t!=="field"?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),a.initializer=e.initializer),a},toElementFinisherExtras:function(e){var t=this.toElementDescriptor(e),r=wr(e,"finisher"),n=this.toElementDescriptors(e.extras);return{element:t,finisher:r,extras:n}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)},r={value:"Descriptor",configurable:!0};return Object.defineProperty(t,Symbol.toStringTag,r),t},toClassDescriptor:function(e){var t=String(e.kind);if(t!=="class")throw new TypeError(`A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "`+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=wr(e,"finisher"),n=this.toElementDescriptors(e.elements);return{elements:n,finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(n!==void 0){if(typeof n!="function")throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(e[t]!==void 0)throw new TypeError(r+" can't have a ."+t+" property.")}};return i}function uo(i){var e=br(i.key),t;i.kind==="method"?t={value:i.value,writable:!0,configurable:!0,enumerable:!1}:i.kind==="get"?t={get:i.value,configurable:!0,enumerable:!1}:i.kind==="set"?t={set:i.value,configurable:!0,enumerable:!1}:i.kind==="field"&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:i.kind==="field"?"field":"method",key:e,placement:i.static?"static":i.kind==="field"?"own":"prototype",descriptor:t};return i.decorators&&(r.decorators=i.decorators),i.kind==="field"&&(r.initializer=i.value),r}function lo(i,e){i.descriptor.get!==void 0?e.descriptor.get=i.descriptor.get:e.descriptor.set=i.descriptor.set}function co(i){for(var e=[],t=function(a){return a.kind==="method"&&a.key===n.key&&a.placement===n.placement},r=0;r<i.length;r++){var n=i[r],o;if(n.kind==="method"&&(o=e.find(t)))if(Ar(n.descriptor)||Ar(o.descriptor)){if(ze(n)||ze(o))throw new ReferenceError("Duplicated methods ("+n.key+") can't be decorated.");o.descriptor=n.descriptor}else{if(ze(n)){if(ze(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+n.key+").");o.decorators=n.decorators}lo(n,o)}else e.push(n)}return e}function ze(i){return i.decorators&&i.decorators.length}function Ar(i){return i!==void 0&&!(i.value===void 0&&i.writable===void 0)}function wr(i,e){var t=i[e];if(t!==void 0&&typeof t!="function")throw new TypeError("Expected '"+e+"' to be a function");return t}function Al(i,e,t){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return t}function wl(){throw new TypeError("attempted to reassign private method")}function Lr(i,e){Lr=function(s,u){return new o(s,u)};var t=Dt(RegExp),r=RegExp.prototype,n=new WeakMap;function o(s,u){var l=t.call(this,s);return n.set(l,u),l}Xi(o,t),o.prototype.exec=function(s){var u=r.exec.call(this,s);return u&&(u.groups=a(u,this)),u},o.prototype[Symbol.replace]=function(s,u){if(typeof u=="string"){var l=n.get(this);return r[Symbol.replace].call(this,s,u.replace(/\$<([^>]+)>/g,function(f,d){return"$"+l[d]}))}else if(typeof u=="function"){var c=this;return r[Symbol.replace].call(this,s,function(){var f=[];return f.push.apply(f,arguments),typeof f[f.length-1]!="object"&&f.push(a(f,c)),u.apply(this,f)})}else return r[Symbol.replace].call(this,s,u)};function a(s,u){var l=n.get(u);return Object.keys(l).reduce(function(c,f){return c[f]=s[l[f]],c},Object.create(null))}return Lr.apply(this,arguments)}var wt=function(e,t){return e.splice(t,1)},fo=function(e,t){t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},ot=function(){var e=[],t=function(o,a){wt(e,e.findIndex(function(s){return s.event===o&&(s.cb===a||!a)}))},r=function(o,a,s){e.filter(function(u){return u.event===o}).map(function(u){return u.cb}).forEach(function(u){return fo(function(){return u.apply(void 0,it(a))},s)})};return{fireSync:function(o){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];r(o,s,!0)},fire:function(o){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];r(o,s,!1)},on:function(o,a){e.push({event:o,cb:a})},onOnce:function(o,a){e.push({event:o,cb:function(){t(o,a),a.apply(void 0,arguments)}})},off:t}},Mr=function(e,t,r){Object.getOwnPropertyNames(e).filter(function(n){return!r.includes(n)}).forEach(function(n){return Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})},po=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ae=function(e){var t={};return Mr(e,t,po),t},vo=function(e){e.forEach(function(t,r){t.released&&wt(e,r)})},N={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ee={INPUT:1,LIMBO:2,LOCAL:3},Cr=function(e){return/[^0-9]+/.exec(e)},Nr=function(){return Cr(1.1.toLocaleString())[0]},Eo=function(){var e=Nr(),t=1e3.toLocaleString(),r="1000";return t!==r?Cr(t)[0]:e==="."?",":"."},g={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Lt=[],pe=function(e,t,r){return new Promise(function(n,o){var a=Lt.filter(function(u){return u.key===e}).map(function(u){return u.cb});if(a.length===0){n(t);return}var s=a.shift();a.reduce(function(u,l){return u.then(function(c){return l(c,r)})},s(t,r)).then(function(u){return n(u)}).catch(function(u){return o(u)})})},De=function(e,t,r){return Lt.filter(function(n){return n.key===e}).map(function(n){return n.cb(t,r)})},go=function(e,t){return Lt.push({key:e,cb:t})},mo=function(e){return Object.assign(Fe,e)},at=function(){return Object.assign({},Fe)},Io=function(e){U(e,function(t,r){Fe[t]&&(Fe[t][0]=Tr(r,Fe[t][0],Fe[t][1]))})},Fe={id:[null,g.STRING],name:["filepond",g.STRING],disabled:[!1,g.BOOLEAN],className:[null,g.STRING],required:[!1,g.BOOLEAN],captureMethod:[null,g.STRING],allowSyncAcceptAttribute:[!0,g.BOOLEAN],allowDrop:[!0,g.BOOLEAN],allowBrowse:[!0,g.BOOLEAN],allowPaste:[!0,g.BOOLEAN],allowMultiple:[!1,g.BOOLEAN],allowReplace:[!0,g.BOOLEAN],allowRevert:[!0,g.BOOLEAN],allowRemove:[!0,g.BOOLEAN],allowProcess:[!0,g.BOOLEAN],allowReorder:[!1,g.BOOLEAN],allowDirectoriesOnly:[!1,g.BOOLEAN],storeAsFile:[!1,g.BOOLEAN],forceRevert:[!1,g.BOOLEAN],maxFiles:[null,g.INT],checkValidity:[!1,g.BOOLEAN],itemInsertLocationFreedom:[!0,g.BOOLEAN],itemInsertLocation:["before",g.STRING],itemInsertInterval:[75,g.INT],dropOnPage:[!1,g.BOOLEAN],dropOnElement:[!0,g.BOOLEAN],dropValidation:[!1,g.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],g.ARRAY],instantUpload:[!0,g.BOOLEAN],maxParallelUploads:[2,g.INT],allowMinimumUploadDuration:[!0,g.BOOLEAN],chunkUploads:[!1,g.BOOLEAN],chunkForce:[!1,g.BOOLEAN],chunkSize:[5e6,g.INT],chunkRetryDelays:[[500,1e3,3e3],g.ARRAY],server:[null,g.SERVER_API],fileSizeBase:[1e3,g.INT],labelFileSizeBytes:["bytes",g.STRING],labelFileSizeKilobytes:["KB",g.STRING],labelFileSizeMegabytes:["MB",g.STRING],labelFileSizeGigabytes:["GB",g.STRING],labelDecimalSeparator:[Nr(),g.STRING],labelThousandsSeparator:[Eo(),g.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',g.STRING],labelInvalidField:["Field contains invalid files",g.STRING],labelFileWaitingForSize:["Waiting for size",g.STRING],labelFileSizeNotAvailable:["Size not available",g.STRING],labelFileCountSingular:["file in list",g.STRING],labelFileCountPlural:["files in list",g.STRING],labelFileLoading:["Loading",g.STRING],labelFileAdded:["Added",g.STRING],labelFileLoadError:["Error during load",g.STRING],labelFileRemoved:["Removed",g.STRING],labelFileRemoveError:["Error during remove",g.STRING],labelFileProcessing:["Uploading",g.STRING],labelFileProcessingComplete:["Upload complete",g.STRING],labelFileProcessingAborted:["Upload cancelled",g.STRING],labelFileProcessingError:["Error during upload",g.STRING],labelFileProcessingRevertError:["Error during revert",g.STRING],labelTapToCancel:["tap to cancel",g.STRING],labelTapToRetry:["tap to retry",g.STRING],labelTapToUndo:["tap to undo",g.STRING],labelButtonRemoveItem:["Remove",g.STRING],labelButtonAbortItemLoad:["Abort",g.STRING],labelButtonRetryItemLoad:["Retry",g.STRING],labelButtonAbortItemProcessing:["Cancel",g.STRING],labelButtonUndoItemProcessing:["Undo",g.STRING],labelButtonRetryItemProcessing:["Retry",g.STRING],labelButtonProcessItem:["Upload",g.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',g.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',g.STRING],oninit:[null,g.FUNCTION],onwarning:[null,g.FUNCTION],onerror:[null,g.FUNCTION],onactivatefile:[null,g.FUNCTION],oninitfile:[null,g.FUNCTION],onaddfilestart:[null,g.FUNCTION],onaddfileprogress:[null,g.FUNCTION],onaddfile:[null,g.FUNCTION],onprocessfilestart:[null,g.FUNCTION],onprocessfileprogress:[null,g.FUNCTION],onprocessfileabort:[null,g.FUNCTION],onprocessfilerevert:[null,g.FUNCTION],onprocessfile:[null,g.FUNCTION],onprocessfiles:[null,g.FUNCTION],onremovefile:[null,g.FUNCTION],onpreparefile:[null,g.FUNCTION],onupdatefiles:[null,g.FUNCTION],onreorderfiles:[null,g.FUNCTION],beforeDropFile:[null,g.FUNCTION],beforeAddFile:[null,g.FUNCTION],beforeRemoveFile:[null,g.FUNCTION],beforePrepareFile:[null,g.FUNCTION],stylePanelLayout:[null,g.STRING],stylePanelAspectRatio:[null,g.STRING],styleItemPanelAspectRatio:[null,g.STRING],styleButtonRemoveItemPosition:["left",g.STRING],styleButtonProcessItemPosition:["right",g.STRING],styleLoadIndicatorPosition:["right",g.STRING],styleProgressIndicatorPosition:["right",g.STRING],styleButtonRemoveItemAlign:[!1,g.BOOLEAN],files:[[],g.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],g.ARRAY]},be=function(e,t){return Ie(t)?e[0]||null:Ne(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(function(r){return r.id===t})||null)},Fr=function(e){if(Ie(e))return e;if(/:/.test(e)){var t=e.split(":");return t[1]/t[0]}return parseFloat(e)},ve=function(e){return e.filter(function(t){return!t.archived})},Ge={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},st=null,To=function(){if(st===null)try{var e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));var t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,st=t.files.length===1}catch{st=!1}return st},_o=[N.LOAD_ERROR,N.PROCESSING_ERROR,N.PROCESSING_REVERT_ERROR],ho=[N.LOADING,N.PROCESSING,N.PROCESSING_QUEUED,N.INIT],Ro=[N.PROCESSING_COMPLETE],Oo=function(e){return _o.includes(e.status)},yo=function(e){return ho.includes(e.status)},So=function(e){return Ro.includes(e.status)},Gr=function(e){return re(e.options.server)&&(re(e.options.server.process)||Se(e.options.server.process))},Do=function(e){return{GET_STATUS:function(){var r=ve(e.items),n=Ge.EMPTY,o=Ge.ERROR,a=Ge.BUSY,s=Ge.IDLE,u=Ge.READY;return r.length===0?n:r.some(Oo)?o:r.some(yo)?a:r.some(So)?u:s},GET_ITEM:function(r){return be(e.items,r)},GET_ACTIVE_ITEM:function(r){return be(ve(e.items),r)},GET_ACTIVE_ITEMS:function(){return ve(e.items)},GET_ITEMS:function(){return e.items},GET_ITEM_NAME:function(r){var n=be(e.items,r);return n?n.filename:null},GET_ITEM_SIZE:function(r){var n=be(e.items,r);return n?n.fileSize:null},GET_STYLES:function(){return Object.keys(e.options).filter(function(r){return/^style/.test(r)}).map(function(r){return{name:r,value:e.options[r]}})},GET_PANEL_ASPECT_RATIO:function(){var r=/circle/.test(e.options.stylePanelLayout),n=r?1:Fr(e.options.stylePanelAspectRatio);return n},GET_ITEM_PANEL_ASPECT_RATIO:function(){return e.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(r){return ve(e.items).filter(function(n){return n.status===r})},GET_TOTAL_ITEMS:function(){return ve(e.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return e.options.storeAsFile&&To()&&!Gr(e)},IS_ASYNC:function(){return Gr(e)},GET_FILE_SIZE_LABELS:function(r){return{labelBytes:r("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:r("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:r("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:r("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},bo=function(e){var t=ve(e.items).length;if(!e.options.allowMultiple)return t===0;var r=e.options.maxFiles;return r===null||t<r},Br=function(e,t,r){return Math.max(Math.min(r,e),t)},Po=function(e,t,r){return e.splice(t,0,r)},Ao=function(e,t,r){return Ie(t)?null:typeof r>"u"?(e.push(t),t):(r=Br(r,0,e.length),Po(e,r,t),t)},Mt=function(e){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e)},We=function(e){return(""+e).split("/").pop().split("?").shift()},ut=function(e){return e.split(".").pop()},wo=function(e){if(typeof e!="string")return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},je=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t+e).slice(-t.length)},Ur=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return e.getFullYear()+"-"+je(e.getMonth()+1,"00")+"-"+je(e.getDate(),"00")+"_"+je(e.getHours(),"00")+"-"+je(e.getMinutes(),"00")+"-"+je(e.getSeconds(),"00")},Be=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=typeof r=="string"?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),oe(t)||(t=Ur()),t&&n===null&&ut(t)?o.name=t:(n=n||wo(o.type),o.name=t+(n?"."+n:"")),o},Lo=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},Vr=function(e,t){var r=Lo();if(r){var n=new r;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},Mo=function(e,t){for(var r=new ArrayBuffer(e.length),n=new Uint8Array(r),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return Vr(r,t)},xr=function(e){return(/^data:(.+);/.exec(e)||[])[1]||null},Co=function(e){var t=e.split(",")[1];return t.replace(/\s/g,"")},No=function(e){return atob(Co(e))},Fo=function(e){var t=xr(e),r=No(e);return Mo(r,t)},Go=function(e,t,r){return Be(Fo(e),t,null,r)},Bo=function(e){if(!/^content-disposition:/i.test(e))return null;var t=e.split(/filename=|filename\*=.+''/).splice(1).map(function(r){return r.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(r){return r.length});return t.length?decodeURI(t[t.length-1]):null},Uo=function(e){if(/content-length:/i.test(e)){var t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Vo=function(e){if(/x-content-transfer-id:/i.test(e)){var t=(e.split(":")[1]||"").trim();return t||null}return null},Ct=function(e){var t={source:null,name:null,size:null},r=e.split(`
`),n=!0,o=!1,a=void 0;try{for(var s=r[Symbol.iterator](),u;!(n=(u=s.next()).done);n=!0){var l=u.value,c=Bo(l);if(c){t.name=c;continue}var f=Uo(l);if(f){t.size=f;continue}var d=Vo(l);if(d){t.source=d;continue}}}catch(E){o=!0,a=E}finally{try{!n&&s.return!=null&&s.return()}finally{if(o)throw a}}return t},xo=function(e){var t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=function(){return t.progress},n=function(){t.request&&t.request.abort&&t.request.abort()},o=function(){var l=t.source;s.fire("init",l),l instanceof File?s.fire("load",l):l instanceof Blob?s.fire("load",Be(l,l.name)):Mt(l)?s.fire("load",Go(l)):a(l)},a=function(l){if(!e){s.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,function(c){t.duration=Date.now()-t.timestamp,t.complete=!0,c instanceof Blob&&(c=Be(c,c.name||We(l))),s.fire("load",c instanceof Blob?c:c?c.body:null)},function(c){s.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},function(c,f,d){if(d&&(t.size=d),t.duration=Date.now()-t.timestamp,!c){t.progress=null;return}t.progress=f/d,s.fire("progress",t.progress)},function(){s.fire("abort")},function(c){var f=Ct(typeof c=="string"?c:c.headers);s.fire("meta",{size:t.size||f.size,filename:f.name,source:f.source})})},s=Object.assign({},ot(),{setSource:function(l){return t.source=l},getProgress:r,abort:n,load:o});return s},qr=function(e){return/GET|HEAD/.test(e)},Pe=function(e,t,r){var n={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){o=!0,s.abort()}},o=!1,a=!1;r=Object.assign({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),qr(r.method)&&e&&(t=""+t+encodeURIComponent(typeof e=="string"?e:JSON.stringify(e)));var s=new XMLHttpRequest,u=qr(r.method)?s:s.upload;return u.onprogress=function(l){o||n.onprogress(l.lengthComputable,l.loaded,l.total)},s.onreadystatechange=function(){s.readyState<2||s.readyState===4&&s.status===0||a||(a=!0,n.onheaders(s))},s.onload=function(){s.status>=200&&s.status<300?n.onload(s):n.onerror(s)},s.onerror=function(){return n.onerror(s)},s.onabort=function(){o=!0,n.onabort()},s.ontimeout=function(){return n.ontimeout(s)},s.open(r.method,t,!0),Ne(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach(function(l){var c=unescape(encodeURIComponent(r.headers[l]));s.setRequestHeader(l,c)}),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),n},Q=function(e,t,r,n){return{type:e,code:t,body:r,headers:n}},Ae=function(e){return function(t){e(Q("error",0,"Timeout",t.getAllResponseHeaders()))}},Yr=function(e){return/\?/.test(e)},ke=function(){for(var e="",t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(o){e+=Yr(e)&&Yr(o)?o.replace(/\?/,"&"):o}),e},Nt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(typeof t=="function")return t;if(!t||!oe(t.url))return null;var r=t.onload||function(o){return o},n=t.onerror||function(o){return null};return function(o,a,s,u,l,c){var f=Pe(o,ke(e,t.url),Object.assign({},t,{responseType:"blob"}));return f.onload=function(d){var E=d.getAllResponseHeaders(),m=Ct(E).name||We(o);a(Q("load",d.status,t.method==="HEAD"?null:Be(r(d.response),m),E))},f.onerror=function(d){s(Q("error",d.status,n(d.response)||d.statusText,d.getAllResponseHeaders()))},f.onheaders=function(d){c(Q("headers",d.status,null,d.getAllResponseHeaders()))},f.ontimeout=Ae(s),f.onprogress=u,f.onabort=l,f}},fe={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},qo=function(e,t,r,n,o,a,s,u,l,c,f){for(var d=[],E=f.chunkTransferId,m=f.chunkServer,I=f.chunkSize,v=f.chunkRetryDelays,_={serverId:E,aborted:!1},S=t.ondata||function(T){return T},P=t.onload||function(T,p){return p==="HEAD"?T.getResponseHeader("Upload-Offset"):T.response},h=t.onerror||function(T){return null},G=function(p){var b=new FormData;re(o)&&b.append(r,JSON.stringify(o));var F=typeof t.headers=="function"?t.headers(n,o):Object.assign({},t.headers,{"Upload-Length":n.size}),B=Object.assign({},t,{headers:F}),V=Pe(S(b),ke(e,t.url),B);V.onload=function(q){return p(P(q,B.method))},V.onerror=function(q){return s(Q("error",q.status,h(q.response)||q.statusText,q.getAllResponseHeaders()))},V.ontimeout=Ae(s)},R=function(p){var b=ke(e,m.url,_.serverId),F=typeof t.headers=="function"?t.headers(_.serverId):Object.assign({},t.headers),B={headers:F,method:"HEAD"},V=Pe(null,b,B);V.onload=function(q){return p(P(q,B.method))},V.onerror=function(q){return s(Q("error",q.status,h(q.response)||q.statusText,q.getAllResponseHeaders()))},V.ontimeout=Ae(s)},H=Math.floor(n.size/I),z=0;z<=H;z++){var y=z*I,A=n.slice(y,y+I,"application/offset+octet-stream");d[z]={index:z,size:A.size,offset:y,data:A,file:n,progress:0,retries:it(v),status:fe.QUEUED,error:null,request:null,timeout:null}}var w=function(){return a(_.serverId)},O=function(p){return p.status===fe.QUEUED||p.status===fe.ERROR},D=function(p){if(!_.aborted){if(p=p||d.find(O),!p){d.every(function($){return $.status===fe.COMPLETE})&&w();return}p.status=fe.PROCESSING,p.progress=null;var b=m.ondata||function($){return $},F=m.onerror||function($){return null},B=m.onload||function(){},V=ke(e,m.url,_.serverId),q=typeof m.headers=="function"?m.headers(p):Object.assign({},m.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":p.offset,"Upload-Length":n.size,"Upload-Name":n.name}),k=p.request=Pe(b(p.data),V,Object.assign({},m,{headers:q}));k.onload=function($){B($,p.index,d.length),p.status=fe.COMPLETE,p.request=null,Y()},k.onprogress=function($,xe,Yn){p.progress=$?xe:null,W()},k.onerror=function($){p.status=fe.ERROR,p.request=null,p.error=F($.response)||$.statusText,L(p)||s(Q("error",$.status,F($.response)||$.statusText,$.getAllResponseHeaders()))},k.ontimeout=function($){p.status=fe.ERROR,p.request=null,L(p)||Ae(s)($)},k.onabort=function(){p.status=fe.QUEUED,p.request=null,l()}}},L=function(p){return p.retries.length===0?!1:(p.status=fe.WAITING,clearTimeout(p.timeout),p.timeout=setTimeout(function(){D(p)},p.retries.shift()),!0)},W=function(){var p=d.reduce(function(F,B){return F===null||B.progress===null?null:F+B.progress},0);if(p===null)return u(!1,0,0);var b=d.reduce(function(F,B){return F+B.size},0);u(!0,p,b)},Y=function(){var p=d.filter(function(b){return b.status===fe.PROCESSING}).length;p>=1||D()},M=function(){d.forEach(function(p){clearTimeout(p.timeout),p.request&&p.request.abort()})};return _.serverId?R(function(T){_.aborted||(d.filter(function(p){return p.offset<T}).forEach(function(p){p.status=fe.COMPLETE,p.progress=p.size}),Y())}):G(function(T){_.aborted||(c(T),_.serverId=T,Y())}),{abort:function(){_.aborted=!0,M()}}},Yo=function(e,t,r,n){return function(o,a,s,u,l,c,f){if(o){var d=n.chunkUploads,E=d&&o.size>n.chunkSize,m=d&&(E||n.chunkForce);if(o instanceof Blob&&m)return qo(e,t,r,o,a,s,u,l,c,f,n);var I=t.ondata||function(R){return R},v=t.onload||function(R){return R},_=t.onerror||function(R){return null},S=typeof t.headers=="function"?t.headers(o,a)||{}:Object.assign({},t.headers),P=Object.assign({},t,{headers:S}),h=new FormData;re(a)&&h.append(r,JSON.stringify(a)),(o instanceof Blob?[{name:null,file:o}]:o).forEach(function(R){h.append(r,R.file,R.name===null?R.file.name:""+R.name+R.file.name)});var G=Pe(I(h),ke(e,t.url),P);return G.onload=function(R){s(Q("load",R.status,v(R.response),R.getAllResponseHeaders()))},G.onerror=function(R){u(Q("error",R.status,_(R.response)||R.statusText,R.getAllResponseHeaders()))},G.ontimeout=Ae(u),G.onprogress=l,G.onabort=c,G}}},Ho=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return typeof t=="function"?function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t.apply(void 0,[r].concat(a,[n]))}:!t||!oe(t.url)?null:Yo(e,t,r,n)},Xe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(typeof t=="function")return t;if(!t||!oe(t.url))return function(o,a){return a()};var r=t.onload||function(o){return o},n=t.onerror||function(o){return null};return function(o,a,s){var u=Pe(o,e+t.url,t);return u.onload=function(l){a(Q("load",l.status,r(l.response),l.getAllResponseHeaders()))},u.onerror=function(l){s(Q("error",l.status,n(l.response)||l.statusText,l.getAllResponseHeaders()))},u.ontimeout=Ae(s),u}},Hr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return e+Math.random()*(t-e)},zo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:25,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:250,a=null,s=Date.now(),u=function l(){var c=Date.now()-s,f=Hr(n,o);c+f>t&&(f=c+f-t);var d=c/t;if(d>=1||document.hidden){e(1);return}e(d),a=setTimeout(l,f)};return t>0&&u(),{clear:function(){clearTimeout(a)}}},Wo=function(e,t){var r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},n=t.allowMinimumUploadDuration,o=function(d,E){var m=function(){r.duration===0||r.progress===null||c.fire("progress",c.getProgress())},I=function(){r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=zo(function(v){r.perceivedProgress=v,r.perceivedDuration=Date.now()-r.timestamp,m(),r.response&&r.perceivedProgress===1&&!r.complete&&I()},n?Hr(750,1500):0),r.request=e(d,E,function(v){r.response=re(v)?v:{type:"load",code:200,body:""+v,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!n||n&&r.perceivedProgress===1)&&I()},function(v){r.perceivedPerformanceUpdater.clear(),c.fire("error",re(v)?v:{type:"error",code:0,body:""+v})},function(v,_,S){r.duration=Date.now()-r.timestamp,r.progress=v?_/S:null,m()},function(){r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)},function(v){c.fire("transfer",v)})},a=function(){r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},s=function(){a(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null},u=n?function(){return r.progress?Math.min(r.progress,r.perceivedProgress):null}:function(){return r.progress||null},l=n?function(){return Math.min(r.duration,r.perceivedDuration)}:function(){return r.duration},c=Object.assign({},ot(),{process:o,abort:a,getProgress:u,getDuration:l,reset:s});return c},zr=function(e){return e.substring(0,e.lastIndexOf("."))||e},jo=function(e){var t=[e.name,e.size,e.type];return e instanceof Blob||Mt(e)?t[0]=e.name||Ur():Mt(e)?(t[1]=e.length,t[2]=xr(e)):oe(e)&&(t[0]=We(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},we=function(e){return!!(e instanceof File||e instanceof Blob&&e.name)},ko=function i(e){if(!re(e))return e;var t=Ke(e)?[]:{};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t[r]=n&&re(n)?i(n):n}return t},Xo=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=Rt(),o={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?N.PROCESSING_COMPLETE:N.INIT,activeLoader:null,activeProcessor:null},a=null,s={},u=function(A){return o.status=A},l=function(A){if(!(o.released||o.frozen)){for(var w=arguments.length,O=new Array(w>1?w-1:0),D=1;D<w;D++)O[D-1]=arguments[D];H.fire.apply(H,[A].concat(O))}},c=function(){return ut(o.file.name)},f=function(){return o.file.type},d=function(){return o.file.size},E=function(){return o.file},m=function(A,w,O){if(o.source=A,H.fireSync("init"),o.file){H.fireSync("load-skip");return}o.file=jo(A),w.on("init",function(){l("load-init")}),w.on("meta",function(D){o.file.size=D.size,o.file.filename=D.filename,D.source&&(e=ee.LIMBO,o.serverFileReference=D.source,o.status=N.PROCESSING_COMPLETE),l("load-meta")}),w.on("progress",function(D){u(N.LOADING),l("load-progress",D)}),w.on("error",function(D){u(N.LOAD_ERROR),l("load-request-error",D)}),w.on("abort",function(){u(N.INIT),l("load-abort")}),w.on("load",function(D){o.activeLoader=null;var L=function(M){o.file=we(M)?M:o.file,e===ee.LIMBO&&o.serverFileReference?u(N.PROCESSING_COMPLETE):u(N.IDLE),l("load")},W=function(M){o.file=D,l("load-meta"),u(N.LOAD_ERROR),l("load-file-error",M)};if(o.serverFileReference){L(D);return}O(D,L,W)}),w.setSource(A),o.activeLoader=w,w.load()},I=function(){o.activeLoader&&o.activeLoader.load()},v=function(){if(o.activeLoader){o.activeLoader.abort();return}u(N.INIT),l("load-abort")},_=function y(A,w){if(o.processingAborted){o.processingAborted=!1;return}if(u(N.PROCESSING),a=null,!(o.file instanceof Blob)){H.on("load",function(){y(A,w)});return}A.on("load",function(L){o.transferId=null,o.serverFileReference=L}),A.on("transfer",function(L){o.transferId=L}),A.on("load-perceived",function(L){o.activeProcessor=null,o.transferId=null,o.serverFileReference=L,u(N.PROCESSING_COMPLETE),l("process-complete",L)}),A.on("start",function(){l("process-start")}),A.on("error",function(L){o.activeProcessor=null,u(N.PROCESSING_ERROR),l("process-error",L)}),A.on("abort",function(L){o.activeProcessor=null,o.serverFileReference=L,u(N.IDLE),l("process-abort"),a&&a()}),A.on("progress",function(L){l("process-progress",L)});var O=function(W){o.archived||A.process(W,Object.assign({},s))},D=console.error;w(o.file,O,D),o.activeProcessor=A},S=function(){o.processingAborted=!1,u(N.PROCESSING_QUEUED)},P=function(){return new Promise(function(A){if(!o.activeProcessor){o.processingAborted=!0,u(N.IDLE),l("process-abort"),A();return}a=function(){A()},o.activeProcessor.abort()})},h=function(A,w){return new Promise(function(O,D){var L=o.serverFileReference!==null?o.serverFileReference:o.transferId;if(L===null){O();return}A(L,function(){o.serverFileReference=null,o.transferId=null,O()},function(W){if(!w){O();return}u(N.PROCESSING_REVERT_ERROR),l("process-revert-error"),D(W)}),u(N.IDLE),l("process-revert")})},G=function(A,w,O){var D=A.split("."),L=D[0],W=D.pop(),Y=s;D.forEach(function(M){return Y=Y[M]}),JSON.stringify(Y[W])!==JSON.stringify(w)&&(Y[W]=w,l("metadata-update",{key:L,value:s[L],silent:O}))},R=function(A){return ko(A?s[A]:s)},H=Object.assign({id:{get:function(){return n}},origin:{get:function(){return e},set:function(A){return e=A}},serverId:{get:function(){return o.serverFileReference}},transferId:{get:function(){return o.transferId}},status:{get:function(){return o.status}},filename:{get:function(){return o.file.name}},filenameWithoutExtension:{get:function(){return zr(o.file.name)}},fileExtension:{get:c},fileType:{get:f},fileSize:{get:d},file:{get:E},relativePath:{get:function(){return o.file._relativePath}},source:{get:function(){return o.source}},getMetadata:R,setMetadata:function(A,w,O){if(re(A)){var D=A;return Object.keys(D).forEach(function(L){G(L,D[L],w)}),A}return G(A,w,O),w},extend:function(A,w){return z[A]=w},abortLoad:v,retryLoad:I,requestProcessing:S,abortProcessing:P,load:m,process:_,revert:h},ot(),{freeze:function(){return o.frozen=!0},release:function(){return o.released=!0},released:{get:function(){return o.released}},archive:function(){return o.archived=!0},archived:{get:function(){return o.archived}},setFile:function(A){return o.file=A}}),z=ue(H);return z},$o=function(e,t){return Ie(t)?0:oe(t)?e.findIndex(function(r){return r.id===t}):-1},Wr=function(e,t){var r=$o(e,t);if(!(r<0))return e[r]||null},jr=function(e,t,r,n,o,a){var s=Pe(null,e,{method:"GET",responseType:"blob"});return s.onload=function(u){var l=u.getAllResponseHeaders(),c=Ct(l).name||We(e);t(Q("load",u.status,Be(u.response,c),l))},s.onerror=function(u){r(Q("error",u.status,u.statusText,u.getAllResponseHeaders()))},s.onheaders=function(u){a(Q("headers",u.status,null,u.getAllResponseHeaders()))},s.ontimeout=Ae(r),s.onprogress=n,s.onabort=o,s},kr=function(e){return e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},Qo=function(e){return(e.indexOf(":")>-1||e.indexOf("//")>-1)&&kr(location.href)!==kr(e)},lt=function(e){return function(){return Se(e)?e.apply(void 0,arguments):e}},Ko=function(e){return!we(e.file)},Ft=function(e,t){clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(function(){e("DID_UPDATE_ITEMS",{items:ve(t.items)})},0)},Xr=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise(function(o){if(!e)return o(!0);var a=e.apply(void 0,r);if(a==null)return o(!0);if(typeof a=="boolean")return o(a);typeof a.then=="function"&&a.then(o)})},Gt=function(e,t){e.items.sort(function(r,n){return t(ae(r),ae(n))})},de=function(e,t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.query,o=r.success,a=o===void 0?function(){}:o,s=r.failure,u=s===void 0?function(){}:s,l=Zi(r,["query","success","failure"]),c=be(e.items,n);if(!c){u({error:Q("error",0,"Item not found"),file:null});return}t(c,a,u,l||{})}},Zo=function(e,t,r){return{ABORT_ALL:function(){ve(r.items).forEach(function(o){o.freeze(),o.abortLoad(),o.abortProcessing()})},DID_SET_FILES:function(o){var a=o.value,s=a===void 0?[]:a,u=s.map(function(c){return{source:c.source?c.source:c,options:c.options}}),l=ve(r.items);l.forEach(function(c){u.find(function(f){return f.source===c.source||f.source===c.file})||e("REMOVE_ITEM",{query:c,remove:!1})}),l=ve(r.items),u.forEach(function(c,f){l.find(function(d){return d.source===c.source||d.file===c.source})||e("ADD_ITEM",Object.assign({},c,{interactionMethod:ce.NONE,index:f}))})},DID_UPDATE_ITEM_METADATA:function(o){var a=o.id,s=o.action,u=o.change;u.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout(function(){var l=Wr(r.items,a);if(!t("IS_ASYNC")){pe("SHOULD_PREPARE_OUTPUT",!1,{item:l,query:t,action:s,change:u}).then(function(E){var m=t("GET_BEFORE_PREPARE_FILE");m&&(E=m(l,E)),E&&e("REQUEST_PREPARE_OUTPUT",{query:a,item:l,success:function(v){e("DID_PREPARE_OUTPUT",{id:a,file:v})}},!0)});return}l.origin===ee.LOCAL&&e("DID_LOAD_ITEM",{id:l.id,error:null,serverFileReference:l.source});var c=function(){setTimeout(function(){e("REQUEST_ITEM_PROCESSING",{query:a})},32)},f=function(m){l.revert(Xe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(m?c:function(){}).catch(function(){})},d=function(m){l.abortProcessing().then(m?c:function(){})};if(l.status===N.PROCESSING_COMPLETE)return f(r.options.instantUpload);if(l.status===N.PROCESSING)return d(r.options.instantUpload);r.options.instantUpload&&c()},0))},MOVE_ITEM:function(o){var a=o.query,s=o.index,u=be(r.items,a);if(u){var l=r.items.indexOf(u);s=Br(s,0,r.items.length-1),l!==s&&r.items.splice(s,0,r.items.splice(l,1)[0])}},SORT:function(o){var a=o.compare;Gt(r,a),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(o){var a=o.items,s=o.index,u=o.interactionMethod,l=o.success,c=l===void 0?function(){}:l,f=o.failure,d=f===void 0?function(){}:f,E=s;if(s===-1||typeof s>"u"){var m=t("GET_ITEM_INSERT_LOCATION"),I=t("GET_TOTAL_ITEMS");E=m==="before"?0:I}var v=t("GET_IGNORED_FILES"),_=function(G){return we(G)?!v.includes(G.name.toLowerCase()):!Ie(G)},S=a.filter(_),P=S.map(function(h){return new Promise(function(G,R){e("ADD_ITEM",{interactionMethod:u,source:h.source||h,success:G,failure:R,index:E++,options:h.options||{}})})});Promise.all(P).then(c).catch(d)},ADD_ITEM:function(o){var a=o.source,s=o.index,u=s===void 0?-1:s,l=o.interactionMethod,c=o.success,f=c===void 0?function(){}:c,d=o.failure,E=d===void 0?function(){}:d,m=o.options,I=m===void 0?{}:m;if(Ie(a)){E({error:Q("error",0,"No source"),file:null});return}if(!(we(a)&&r.options.ignoredFiles.includes(a.name.toLowerCase()))){if(!bo(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){var v=Q("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:a,error:v}),E({error:v,file:null});return}var _=ve(r.items)[0];if(_.status===N.PROCESSING_COMPLETE||_.status===N.PROCESSING_REVERT_ERROR){var S=t("GET_FORCE_REVERT");if(_.revert(Xe(r.options.server.url,r.options.server.revert),S).then(function(){S&&e("ADD_ITEM",{source:a,index:u,interactionMethod:l,success:f,failure:E,options:I})}).catch(function(){}),S)return}e("REMOVE_ITEM",{query:_.id})}var P=I.type==="local"?ee.LOCAL:I.type==="limbo"?ee.LIMBO:ee.INPUT,h=Xo(P,P===ee.INPUT?null:a,I.file);Object.keys(I.metadata||{}).forEach(function(O){h.setMetadata(O,I.metadata[O])}),De("DID_CREATE_ITEM",h,{query:t,dispatch:e});var G=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(u=G==="before"?-1:r.items.length),Ao(r.items,h,u),Se(G)&&a&&Gt(r,G);var R=h.id;h.on("init",function(){e("DID_INIT_ITEM",{id:R})}),h.on("load-init",function(){e("DID_START_ITEM_LOAD",{id:R})}),h.on("load-meta",function(){e("DID_UPDATE_ITEM_META",{id:R})}),h.on("load-progress",function(O){e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:R,progress:O})}),h.on("load-request-error",function(O){var D=lt(r.options.labelFileLoadError)(O);if(O.code>=400&&O.code<500){e("DID_THROW_ITEM_INVALID",{id:R,error:O,status:{main:D,sub:O.code+" ("+O.body+")"}}),E({error:O,file:ae(h)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:R,error:O,status:{main:D,sub:r.options.labelTapToRetry}})}),h.on("load-file-error",function(O){e("DID_THROW_ITEM_INVALID",{id:R,error:O.status,status:O.status}),E({error:O.status,file:ae(h)})}),h.on("load-abort",function(){e("REMOVE_ITEM",{query:R})}),h.on("load-skip",function(){h.on("metadata-update",function(O){we(h.file)&&e("DID_UPDATE_ITEM_METADATA",{id:R,change:O})}),e("COMPLETE_LOAD_ITEM",{query:R,item:h,data:{source:a,success:f}})}),h.on("load",function(){var O=function(L){if(!L){e("REMOVE_ITEM",{query:R});return}h.on("metadata-update",function(W){e("DID_UPDATE_ITEM_METADATA",{id:R,change:W})}),pe("SHOULD_PREPARE_OUTPUT",!1,{item:h,query:t}).then(function(W){var Y=t("GET_BEFORE_PREPARE_FILE");Y&&(W=Y(h,W));var M=function(){e("COMPLETE_LOAD_ITEM",{query:R,item:h,data:{source:a,success:f}}),Ft(e,r)};if(W){e("REQUEST_PREPARE_OUTPUT",{query:R,item:h,success:function(p){e("DID_PREPARE_OUTPUT",{id:R,file:p}),M()}},!0);return}M()})};pe("DID_LOAD_ITEM",h,{query:t,dispatch:e}).then(function(){Xr(t("GET_BEFORE_ADD_FILE"),ae(h)).then(O)}).catch(function(D){if(!D||!D.error||!D.status)return O(!1);e("DID_THROW_ITEM_INVALID",{id:R,error:D.error,status:D.status})})}),h.on("process-start",function(){e("DID_START_ITEM_PROCESSING",{id:R})}),h.on("process-progress",function(O){e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:R,progress:O})}),h.on("process-error",function(O){e("DID_THROW_ITEM_PROCESSING_ERROR",{id:R,error:O,status:{main:lt(r.options.labelFileProcessingError)(O),sub:r.options.labelTapToRetry}})}),h.on("process-revert-error",function(O){e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:R,error:O,status:{main:lt(r.options.labelFileProcessingRevertError)(O),sub:r.options.labelTapToRetry}})}),h.on("process-complete",function(O){e("DID_COMPLETE_ITEM_PROCESSING",{id:R,error:null,serverFileReference:O}),e("DID_DEFINE_VALUE",{id:R,value:O})}),h.on("process-abort",function(){e("DID_ABORT_ITEM_PROCESSING",{id:R})}),h.on("process-revert",function(){e("DID_REVERT_ITEM_PROCESSING",{id:R}),e("DID_DEFINE_VALUE",{id:R,value:null})}),e("DID_ADD_ITEM",{id:R,index:u,interactionMethod:l}),Ft(e,r);var H=r.options.server||{},z=H.url,y=H.load,A=H.restore,w=H.fetch;h.load(a,xo(P===ee.INPUT?oe(a)&&Qo(a)&&w?Nt(z,w):jr:P===ee.LIMBO?Nt(z,A):Nt(z,y)),function(O,D,L){pe("LOAD_FILE",O,{query:t}).then(D).catch(L)})}},REQUEST_PREPARE_OUTPUT:function(o){var a=o.item,s=o.success,u=o.failure,l=u===void 0?function(){}:u,c={error:Q("error",0,"Item not found"),file:null};if(a.archived)return l(c);pe("PREPARE_OUTPUT",a.file,{query:t,item:a}).then(function(f){pe("COMPLETE_PREPARE_OUTPUT",f,{query:t,item:a}).then(function(d){if(a.archived)return l(c);s(d)})})},COMPLETE_LOAD_ITEM:function(o){var a=o.item,s=o.data,u=s.success,l=s.source,c=t("GET_ITEM_INSERT_LOCATION");if(Se(c)&&l&&Gt(r,c),e("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.origin===ee.INPUT?null:l}),u(ae(a)),a.origin===ee.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:a.id});return}if(a.origin===ee.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:a.id,error:null,serverFileReference:l}),e("DID_DEFINE_VALUE",{id:a.id,value:a.serverId||l});return}t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:a.id})},RETRY_ITEM_LOAD:de(r,function(n){n.retryLoad()}),REQUEST_ITEM_PREPARE:de(r,function(n,o,a){e("REQUEST_PREPARE_OUTPUT",{query:n.id,item:n,success:function(u){e("DID_PREPARE_OUTPUT",{id:n.id,file:u}),o({file:n,output:u})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:de(r,function(n,o,a){var s=n.status===N.IDLE||n.status===N.PROCESSING_ERROR;if(!s){var u=function(){return e("REQUEST_ITEM_PROCESSING",{query:n,success:o,failure:a})},l=function(){return document.hidden?u():setTimeout(u,32)};n.status===N.PROCESSING_COMPLETE||n.status===N.PROCESSING_REVERT_ERROR?n.revert(Xe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(function(){}):n.status===N.PROCESSING&&n.abortProcessing().then(l);return}n.status!==N.PROCESSING_QUEUED&&(n.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:n.id}),e("PROCESS_ITEM",{query:n,success:o,failure:a},!0))}),PROCESS_ITEM:de(r,function(n,o,a){var s=t("GET_MAX_PARALLEL_UPLOADS"),u=t("GET_ITEMS_BY_STATUS",N.PROCESSING).length;if(u===s){r.processingQueue.push({id:n.id,success:o,failure:a});return}if(n.status!==N.PROCESSING){var l=function f(){var d=r.processingQueue.shift();if(d){var E=d.id,m=d.success,I=d.failure,v=be(r.items,E);if(!v||v.archived){f();return}e("PROCESS_ITEM",{query:E,success:m,failure:I},!0)}};n.onOnce("process-complete",function(){o(ae(n)),l();var f=r.options.server,d=r.options.instantUpload;if(d&&n.origin===ee.LOCAL&&Se(f.remove)){var E=function(){};n.origin=ee.LIMBO,r.options.server.remove(n.source,E,E)}var m=t("GET_ITEMS_BY_STATUS",N.PROCESSING_COMPLETE).length===r.items.length;m&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),n.onOnce("process-error",function(f){a({error:f,file:ae(n)}),l()});var c=r.options;n.process(Wo(Ho(c.server.url,c.server.process,c.name,{chunkTransferId:n.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),function(f,d,E){pe("PREPARE_OUTPUT",f,{query:t,item:n}).then(function(m){e("DID_PREPARE_OUTPUT",{id:n.id,file:m}),d(m)}).catch(E)})}}),RETRY_ITEM_PROCESSING:de(r,function(n){e("REQUEST_ITEM_PROCESSING",{query:n})}),REQUEST_REMOVE_ITEM:de(r,function(n){Xr(t("GET_BEFORE_REMOVE_FILE"),ae(n)).then(function(o){o&&e("REMOVE_ITEM",{query:n})})}),RELEASE_ITEM:de(r,function(n){n.release()}),REMOVE_ITEM:de(r,function(n,o,a,s){var u=function(){var f=n.id;Wr(r.items,f).archive(),e("DID_REMOVE_ITEM",{error:null,id:f,item:n}),Ft(e,r),o(ae(n))},l=r.options.server;n.origin===ee.LOCAL&&l&&Se(l.remove)&&s.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:n.id}),l.remove(n.source,function(){return u()},function(c){e("DID_THROW_ITEM_REMOVE_ERROR",{id:n.id,error:Q("error",0,c,null),status:{main:lt(r.options.labelFileRemoveError)(c),sub:r.options.labelTapToRetry}})})):((s.revert&&n.origin!==ee.LOCAL&&n.serverId!==null||r.options.chunkUploads&&n.file.size>r.options.chunkSize||r.options.chunkUploads&&r.options.chunkForce)&&n.revert(Xe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),u())}),ABORT_ITEM_LOAD:de(r,function(n){n.abortLoad()}),ABORT_ITEM_PROCESSING:de(r,function(n){if(n.serverId){e("REVERT_ITEM_PROCESSING",{id:n.id});return}n.abortProcessing().then(function(){var o=r.options.instantUpload;o&&e("REMOVE_ITEM",{query:n.id})})}),REQUEST_REVERT_ITEM_PROCESSING:de(r,function(n){if(!r.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:n});return}var o=function(l){l&&e("REVERT_ITEM_PROCESSING",{query:n})},a=t("GET_BEFORE_REMOVE_FILE");if(!a)return o(!0);var s=a(ae(n));if(s==null)return o(!0);if(typeof s=="boolean")return o(s);typeof s.then=="function"&&s.then(o)}),REVERT_ITEM_PROCESSING:de(r,function(n){n.revert(Xe(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(function(){var o=r.options.instantUpload||Ko(n);o&&e("REMOVE_ITEM",{query:n.id})}).catch(function(){})}),SET_OPTIONS:function(o){var a=o.options,s=Object.keys(a),u=Jo.filter(function(c){return s.includes(c)}),l=[].concat(it(u),it(Object.keys(a).filter(function(c){return!u.includes(c)})));l.forEach(function(c){e("SET_"+et(c,"_").toUpperCase(),{value:a[c]})})}}},Jo=["server"],Bt=function(e){return e},Te=function(e){return document.createElement(e)},K=function(e,t){var r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},$r=function(e,t,r,n){var o=(n%360-90)*Math.PI/180;return{x:e+r*Math.cos(o),y:t+r*Math.sin(o)}},ea=function(e,t,r,n,o,a){var s=$r(e,t,r,o),u=$r(e,t,r,n);return["M",s.x,s.y,"A",r,r,0,a,0,u.x,u.y].join(" ")},ta=function(e,t,r,n,o){var a=1;return o>n&&o-n<=.5&&(a=0),n>o&&n-o>=.5&&(a=0),ea(e,t,r,Math.min(.9999,n)*360,Math.min(.9999,o)*360,a)},ra=function(e){var t=e.root,r=e.props;r.spin=!1,r.progress=0,r.opacity=0;var n=Qe("svg");t.ref.path=Qe("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},na=function(e){var t=e.root,r=e.props;if(r.opacity!==0){r.align&&(t.element.dataset.align=r.align);var n=parseInt(J(t.ref.path,"stroke-width"),10),o=t.rect.element.width*.5,a=0,s=0;r.spin?(a=0,s=.5):(a=0,s=r.progress);var u=ta(o,o,o-n,a,s);J(t.ref.path,"d",u),J(t.ref.path,"stroke-opacity",r.spin||r.progress>0?1:0)}},Qr=Z({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:ra,write:na,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),ia=function(e){var t=e.root,r=e.props;t.element.innerHTML=(r.icon||"")+("<span>"+r.label+"</span>"),r.isDisabled=!1},oa=function(e){var t=e.root,r=e.props,n=r.isDisabled,o=t.query("GET_DISABLED")||r.opacity===0;o&&!n?(r.isDisabled=!0,J(t.element,"disabled","disabled")):!o&&n&&(r.isDisabled=!1,t.element.removeAttribute("disabled"))},Kr=Z({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:ia,write:oa}),Zr=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=n.labelBytes,a=o===void 0?"bytes":o,s=n.labelKilobytes,u=s===void 0?"KB":s,l=n.labelMegabytes,c=l===void 0?"MB":l,f=n.labelGigabytes,d=f===void 0?"GB":f;e=Math.round(Math.abs(e));var E=r,m=r*r,I=r*r*r;return e<E?e+" "+a:e<m?Math.floor(e/E)+" "+u:e<I?Jr(e/m,1,t)+" "+c:Jr(e/I,2,t)+" "+d},Jr=function(e,t,r){return e.toFixed(t).split(".").filter(function(n){return n!=="0"}).join(r)},aa=function(e){var t=e.root,r=e.props,n=Te("span");n.className="filepond--file-info-main",J(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;var o=Te("span");o.className="filepond--file-info-sub",t.appendChild(o),t.ref.fileSize=o,K(o,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),K(n,Bt(t.query("GET_ITEM_NAME",r.id)))},Ut=function(e){var t=e.root,r=e.props;K(t.ref.fileSize,Zr(t.query("GET_ITEM_SIZE",r.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),K(t.ref.fileName,Bt(t.query("GET_ITEM_NAME",r.id)))},en=function(e){var t=e.root,r=e.props;if(Ne(t.query("GET_ITEM_SIZE",r.id))){Ut({root:t,props:r});return}K(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},sa=Z({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ie({DID_LOAD_ITEM:Ut,DID_UPDATE_ITEM_META:Ut,DID_THROW_ITEM_LOAD_ERROR:en,DID_THROW_ITEM_INVALID:en}),didCreateView:function(e){De("CREATE_VIEW",Object.assign({},e,{view:e}))},create:aa,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),tn=function(e){return Math.round(e*100)},ua=function(e){var t=e.root,r=Te("span");r.className="filepond--file-status-main",t.appendChild(r),t.ref.main=r;var n=Te("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,rn({root:t,action:{progress:null}})},rn=function(e){var t=e.root,r=e.action,n=r.progress===null?t.query("GET_LABEL_FILE_LOADING"):t.query("GET_LABEL_FILE_LOADING")+" "+tn(r.progress)+"%";K(t.ref.main,n),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},la=function(e){var t=e.root,r=e.action,n=r.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):t.query("GET_LABEL_FILE_PROCESSING")+" "+tn(r.progress)+"%";K(t.ref.main,n),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},ca=function(e){var t=e.root;K(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},fa=function(e){var t=e.root;K(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},da=function(e){var t=e.root;K(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},nn=function(e){var t=e.root;K(t.ref.main,""),K(t.ref.sub,"")},$e=function(e){var t=e.root,r=e.action;K(t.ref.main,r.status.main),K(t.ref.sub,r.status.sub)},pa=Z({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ie({DID_LOAD_ITEM:nn,DID_REVERT_ITEM_PROCESSING:nn,DID_REQUEST_ITEM_PROCESSING:ca,DID_ABORT_ITEM_PROCESSING:fa,DID_COMPLETE_ITEM_PROCESSING:da,DID_UPDATE_ITEM_PROCESS_PROGRESS:la,DID_UPDATE_ITEM_LOAD_PROGRESS:rn,DID_THROW_ITEM_LOAD_ERROR:$e,DID_THROW_ITEM_INVALID:$e,DID_THROW_ITEM_PROCESSING_ERROR:$e,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:$e,DID_THROW_ITEM_REMOVE_ERROR:$e}),didCreateView:function(e){De("CREATE_VIEW",Object.assign({},e,{view:e}))},create:ua,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Vt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},xt=[];U(Vt,function(i){xt.push(i)});var le=function(e){if(qt(e)==="right")return 0;var t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},va=function(e){var t=e.ref.buttonAbortItemLoad.rect.element;return t.width},ct=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.height/4)},Ea=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.left/2)},ga=function(e){return e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},ma=function(e){return e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},qt=function(e){return e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},Ia={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:ga},processProgressIndicator:{opacity:0,align:ma},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},on={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:le},status:{translateX:le}},Yt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ue={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:le},status:{translateX:le,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:le},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:qt},info:{translateX:le},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:qt},buttonRemoveItem:{opacity:1},info:{translateX:le},status:{opacity:1,translateX:le}},DID_LOAD_ITEM:on,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:le},status:{translateX:le}},DID_START_ITEM_PROCESSING:Yt,DID_REQUEST_ITEM_PROCESSING:Yt,DID_UPDATE_ITEM_PROCESS_PROGRESS:Yt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:le}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:le},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:on},Ta=Z({create:function(e){var t=e.root;t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),_a=function(e){var t=e.root,r=e.props,n=Object.keys(Vt).reduce(function(S,P){return S[P]=Object.assign({},Vt[P]),S},{}),o=r.id,a=t.query("GET_ALLOW_REVERT"),s=t.query("GET_ALLOW_REMOVE"),u=t.query("GET_ALLOW_PROCESS"),l=t.query("GET_INSTANT_UPLOAD"),c=t.query("IS_ASYNC"),f=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN"),d;c?u&&!a?d=function(P){return!/RevertItemProcessing/.test(P)}:!u&&a?d=function(P){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(P)}:!u&&!a&&(d=function(P){return!/Process/.test(P)}):d=function(P){return!/Process/.test(P)};var E=d?xt.filter(d):xt.concat();if(l&&a&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!a){var m=Ue.DID_COMPLETE_ITEM_PROCESSING;m.info.translateX=Ea,m.info.translateY=ct,m.status.translateY=ct,m.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!u&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(S){Ue[S].status.translateY=ct}),Ue.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=va),f&&a){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var I=Ue.DID_COMPLETE_ITEM_PROCESSING;I.info.translateX=le,I.status.translateY=ct,I.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(n.RemoveItem.disabled=!0),U(n,function(S,P){var h=t.createChildView(Kr,{label:t.query(P.label),icon:t.query(P.icon),opacity:0});E.includes(S)&&t.appendChildView(h),P.disabled&&(h.element.setAttribute("disabled","disabled"),h.element.setAttribute("hidden","hidden")),h.element.dataset.align=t.query("GET_STYLE_"+P.align),h.element.classList.add(P.className),h.on("click",function(G){G.stopPropagation(),!P.disabled&&t.dispatch(P.action,{query:o})}),t.ref["button"+S]=h}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(Ta)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(sa,{id:o})),t.ref.status=t.appendChildView(t.createChildView(pa,{id:o}));var v=t.appendChildView(t.createChildView(Qr,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));v.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=v;var _=t.appendChildView(t.createChildView(Qr,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));_.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=_,t.ref.activeStyles=[]},ha=function(e){var t=e.root,r=e.actions,n=e.props;Ra({root:t,actions:r,props:n});var o=r.concat().filter(function(s){return/^DID_/.test(s.type)}).reverse().find(function(s){return Ue[s.type]});if(o){t.ref.activeStyles=[];var a=Ue[o.type];U(Ia,function(s,u){var l=t.ref[s];U(u,function(c,f){var d=a[s]&&typeof a[s][c]<"u"?a[s][c]:f;t.ref.activeStyles.push({control:l,key:c,value:d})})})}t.ref.activeStyles.forEach(function(s){var u=s.control,l=s.key,c=s.value;u[l]=typeof c=="function"?c(t):c})},Ra=ie({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(e){var t=e.root,r=e.action;t.ref.buttonAbortItemProcessing.label=r.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(e){var t=e.root,r=e.action;t.ref.buttonAbortItemLoad.label=r.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(e){var t=e.root,r=e.action;t.ref.buttonAbortItemRemoval.label=r.value},DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(e){var t=e.root;t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(e){var t=e.root,r=e.action;t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=r.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,r=e.action;t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=r.progress}}),Oa=Z({create:_a,write:ha,didCreateView:function(e){De("CREATE_VIEW",Object.assign({},e,{view:e}))},name:"file"}),ya=function(e){var t=e.root,r=e.props;t.ref.fileName=Te("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(Oa,{id:r.id})),t.ref.data=!1},Sa=function(e){var t=e.root,r=e.props;K(t.ref.fileName,Bt(t.query("GET_ITEM_NAME",r.id)))},Da=Z({create:ya,ignoreRect:!0,write:ie({DID_LOAD_ITEM:Sa}),didCreateView:function(e){De("CREATE_VIEW",Object.assign({},e,{view:e}))},tag:"fieldset",name:"file-wrapper"}),an={type:"spring",damping:.6,mass:7},ba=function(e){var t=e.root,r=e.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:an},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:an},styles:["translateY"]}}].forEach(function(n){Pa(t,n,r.name)}),t.element.classList.add("filepond--"+r.name),t.ref.scalable=null},Pa=function(e,t,r){var n=Z({name:"panel-"+t.name+" filepond--"+r,mixins:t.mixins,ignoreRectUpdate:!0}),o=e.createChildView(n,t.props);e.ref[t.name]=e.appendChildView(o)},Aa=function(e){var t=e.root,r=e.props;if((t.ref.scalable===null||r.scalable!==t.ref.scalable)&&(t.ref.scalable=pr(r.scalable)?r.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!!r.height){var n=t.ref.top.rect.element,o=t.ref.bottom.rect.element,a=Math.max(n.height+o.height,r.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(a-n.height-o.height)/100,t.ref.bottom.translateY=a-o.height}},sn=Z({name:"panel",read:function(e){var t=e.root,r=e.props;return r.heightCurrent=t.ref.bottom.translateY},write:Aa,create:ba,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),wa=function(e){var t=e.map(function(n){return n.id}),r=void 0;return{setIndex:function(o){r=o},getIndex:function(){return r},getItemIndex:function(o){return t.indexOf(o.id)}}},un={type:"spring",stiffness:.75,damping:.45,mass:10},ln="spring",cn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},La=function(e){var t=e.root,r=e.props;if(t.ref.handleClick=function(o){return t.dispatch("DID_ACTIVATE_ITEM",{id:r.id})},t.element.id="filepond--item-"+r.id,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(Da,{id:r.id})),t.ref.panel=t.appendChildView(t.createChildView(sn,{name:"item-panel"})),t.ref.panel.height=null,r.markedForRemoval=!1,!!t.query("GET_ALLOW_REORDER")){t.element.dataset.dragState="idle";var n=function(a){if(a.isPrimary){var s=!1,u={x:a.pageX,y:a.pageY};r.dragOrigin={x:t.translateX,y:t.translateY},r.dragCenter={x:a.offsetX,y:a.offsetY};var l=wa(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:r.id,dragState:l});var c=function(I){if(I.isPrimary){I.stopPropagation(),I.preventDefault(),r.dragOffset={x:I.pageX-u.x,y:I.pageY-u.y};var v=r.dragOffset.x*r.dragOffset.x+r.dragOffset.y*r.dragOffset.y;v>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:r.id,dragState:l})}},f=function(I){I.isPrimary&&(r.dragOffset={x:I.pageX-u.x,y:I.pageY-u.y},E())},d=function(){E()},E=function(){document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",f),t.dispatch("DID_DROP_ITEM",{id:r.id,dragState:l}),s&&setTimeout(function(){return t.element.addEventListener("click",t.ref.handleClick)},0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",c),document.addEventListener("pointerup",f)}};t.element.addEventListener("pointerdown",n)}},Ma=ie({DID_UPDATE_PANEL_HEIGHT:function(e){var t=e.root,r=e.action;t.height=r.height}}),Ca=ie({DID_GRAB_ITEM:function(e){var t=e.root,r=e.props;r.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:function(e){var t=e.root;t.element.dataset.dragState="drag"},DID_DROP_ITEM:function(e){var t=e.root,r=e.props;r.dragOffset=null,r.dragOrigin=null,t.element.dataset.dragState="drop"}},function(i){var e=i.root,t=i.actions,r=i.props,n=i.shouldOptimize;e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");var o=t.concat().filter(function(s){return/^DID_/.test(s.type)}).reverse().find(function(s){return cn[s.type]});o&&o.type!==r.currentState&&(r.currentState=o.type,e.element.dataset.filepondItemState=cn[r.currentState]||"");var a=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");a?n||(e.height=e.rect.element.width*a):(Ma({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),n&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),Na=Z({create:La,write:Ca,destroy:function(e){var t=e.root,r=e.props;t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:r.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:ln,scaleY:ln,translateX:un,translateY:un,opacity:{type:"tween",duration:150}}}}),Ht=function(i,e){return Math.max(1,Math.floor((i+1)/e))},zt=function(e,t,r){if(r){var n=e.rect.element.width,o=t.length,a=null;if(o===0||r.top<t[0].rect.element.top)return-1;var s=t[0],u=s.rect.element,l=u.marginLeft+u.marginRight,c=u.width+l,f=Ht(n,c);if(f===1){for(var d=0;d<o;d++){var E=t[d],m=E.rect.outer.top+E.rect.element.height*.5;if(r.top<m)return d}return o}for(var I=u.marginTop+u.marginBottom,v=u.height+I,_=0;_<o;_++){var S=_%f,P=Math.floor(_/f),h=S*c,G=P*v,R=G-u.marginTop,H=h+c,z=G+v+u.marginBottom;if(r.top<z&&r.top>R){if(r.left<H)return _;_!==o-1?a=_:a=null}}return a!==null?a:o}},ft={height:0,width:0,get getHeight(){return this.height},set setHeight(i){(this.height===0||i===0)&&(this.height=i)},get getWidth(){return this.width},set setWidth(i){(this.width===0||i===0)&&(this.width=i)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},Fa=function(e){var t=e.root;J(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},Ga=function(e){var t=e.root,r=e.action,n=r.id,o=r.index,a=r.interactionMethod;t.ref.addIndex=o;var s=Date.now(),u=s,l=1;if(a!==ce.NONE){l=0;var c=t.query("GET_ITEM_INSERT_INTERVAL"),f=s-t.ref.lastItemSpanwDate;u=f<c?s+(c-f):s}t.ref.lastItemSpanwDate=u,t.appendChildView(t.createChildView(Na,{spawnDate:u,id:n,opacity:l,interactionMethod:a}),o)},fn=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(e.opacity===0&&Ba(e,t,r,n,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},Ba=function(e,t,r,n,o){e.interactionMethod===ce.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===ce.DROP?(e.translateX=null,e.translateX=t-n*20,e.translateY=null,e.translateY=r-o*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===ce.BROWSE?(e.translateY=null,e.translateY=r-30):e.interactionMethod===ce.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Ua=function(e){var t=e.root,r=e.action,n=r.id,o=t.childViews.find(function(a){return a.id===n});o&&(o.scaleX=.9,o.scaleY=.9,o.opacity=0,o.markedForRemoval=!0)},Wt=function(e){return e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5},Va=function(e){return e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5},xa=function(e){var t=e.root,r=e.action,n=r.id,o=r.dragState,a=t.query("GET_ITEM",{id:n}),s=t.childViews.find(function(S){return S.id===n}),u=t.childViews.length,l=o.getItemIndex(a);if(s){var c={x:s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,y:s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y},f=Wt(s),d=Va(s),E=Math.floor(t.rect.outer.width/d);E>u&&(E=u);var m=Math.floor(u/E+1);ft.setHeight=f*m,ft.setWidth=d*E;var I={y:Math.floor(c.y/f),x:Math.floor(c.x/d),getGridIndex:function(){return c.y>ft.getHeight||c.y<0||c.x>ft.getWidth||c.x<0?l:this.y*E+this.x},getColIndex:function(){for(var P=t.query("GET_ACTIVE_ITEMS"),h=t.childViews.filter(function(L){return L.rect.element.height}),G=P.map(function(L){return h.find(function(W){return W.id===L.id})}),R=G.findIndex(function(L){return L===s}),H=Wt(s),z=G.length,y=z,A=0,w=0,O=0,D=0;D<z;D++)if(A=Wt(G[D]),O=w,w=O+A,c.y<w){if(R>D){if(c.y<O+H){y=D;break}continue}y=D;break}return y}},v=E>1?I.getGridIndex():I.getColIndex();t.dispatch("MOVE_ITEM",{query:s,index:v});var _=o.getIndex();if(_===void 0||_!==v){if(o.setIndex(v),_===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:l,target:v})}}},qa=ie({DID_ADD_ITEM:Ga,DID_REMOVE_ITEM:Ua,DID_DRAG_ITEM:xa}),Ya=function(e){var t=e.root,r=e.props,n=e.actions,o=e.shouldOptimize;qa({root:t,props:r,actions:n});var a=r.dragCoordinates,s=t.rect.element.width,u=t.childViews.filter(function(y){return y.rect.element.height}),l=t.query("GET_ACTIVE_ITEMS").map(function(y){return u.find(function(A){return A.id===y.id})}).filter(function(y){return y}),c=a?zt(t,l,a):null,f=t.ref.addIndex||null;t.ref.addIndex=null;var d=0,E=0,m=0;if(l.length!==0){var I=l[0].rect.element,v=I.marginTop+I.marginBottom,_=I.marginLeft+I.marginRight,S=I.width+_,P=I.height+v,h=Ht(s,S);if(h===1){var G=0,R=0;l.forEach(function(y,A){if(c){var w=A-c;w===-2?R=-v*.25:w===-1?R=-v*.75:w===0?R=v*.75:w===1?R=v*.25:R=0}o&&(y.translateX=null,y.translateY=null),y.markedForRemoval||fn(y,0,G+R);var O=y.rect.element.height+v,D=O*(y.markedForRemoval?y.opacity:1);G+=D})}else{var H=0,z=0;l.forEach(function(y,A){A===c&&(d=1),A===f&&(m+=1),y.markedForRemoval&&y.opacity<.5&&(E-=1);var w=A+m+d+E,O=w%h,D=Math.floor(w/h),L=O*S,W=D*P,Y=Math.sign(L-H),M=Math.sign(W-z);H=L,z=W,!y.markedForRemoval&&(o&&(y.translateX=null,y.translateY=null),fn(y,L,W,Y,M))})}}},Ha=function(e,t){return t.filter(function(r){return r.data&&r.data.id?e.id===r.data.id:!0})},za=Z({create:Fa,write:Ya,tag:"ul",name:"list",didWriteView:function(e){var t=e.root;t.childViews.filter(function(r){return r.markedForRemoval&&r.opacity===0&&r.resting}).forEach(function(r){r._destroy(),t.removeChildView(r)})},filterFrameActionsForChild:Ha,mixins:{apis:["dragCoordinates"]}}),Wa=function(e){var t=e.root,r=e.props;t.ref.list=t.appendChildView(t.createChildView(za)),r.dragCoordinates=null,r.overflowing=!1},ja=function(e){var t=e.root,r=e.props,n=e.action;t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(r.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},ka=function(e){var t=e.props;t.dragCoordinates=null},Xa=ie({DID_DRAG:ja,DID_END_DRAG:ka}),$a=function(e){var t=e.root,r=e.props,n=e.actions;if(Xa({root:t,props:r,actions:n}),t.ref.list.dragCoordinates=r.dragCoordinates,r.overflowing&&!r.overflow&&(r.overflowing=!1,t.element.dataset.state="",t.height=null),r.overflow){var o=Math.round(r.overflow);o!==t.height&&(r.overflowing=!0,t.element.dataset.state="overflow",t.height=o)}},Qa=Z({create:Wa,write:$a,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ee=function(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";r?J(e,t,n):e.removeAttribute(t)},Ka=function(e){if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){var t=Te("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?r.insertBefore(e,n):r.appendChild(e)}}},Za=function(e){var t=e.root,r=e.props;t.element.id="filepond--browser-"+r.id,J(t.element,"name",t.query("GET_NAME")),J(t.element,"aria-controls","filepond--assistant-"+r.id),J(t.element,"aria-labelledby","filepond--drop-label-"+r.id),dn({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),pn({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),vn({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),jt({root:t}),En({root:t,action:{value:t.query("GET_REQUIRED")}}),gn({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=function(n){if(t.element.value){var o=Array.from(t.element.files).map(function(a){return a._relativePath=a.webkitRelativePath,a});setTimeout(function(){r.onload(o),Ka(t.element)},250)}},t.element.addEventListener("change",t.ref.handleChange)},dn=function(e){var t=e.root,r=e.action;t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Ee(t.element,"accept",!!r.value,r.value?r.value.join(","):"")},pn=function(e){var t=e.root,r=e.action;Ee(t.element,"multiple",r.value)},vn=function(e){var t=e.root,r=e.action;Ee(t.element,"webkitdirectory",r.value)},jt=function(e){var t=e.root,r=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),o=r||!n;Ee(t.element,"disabled",o)},En=function(e){var t=e.root,r=e.action;r.value?t.query("GET_TOTAL_ITEMS")===0&&Ee(t.element,"required",!0):Ee(t.element,"required",!1)},gn=function(e){var t=e.root,r=e.action;Ee(t.element,"capture",!!r.value,r.value===!0?"":r.value)},mn=function(e){var t=e.root,r=t.element;if(t.query("GET_TOTAL_ITEMS")>0){Ee(r,"required",!1),Ee(r,"name",!1);for(var n=t.query("GET_ACTIVE_ITEMS"),o=!1,a=0;a<n.length;a++)n[a].status===N.LOAD_ERROR&&(o=!0);t.element.setCustomValidity(o?t.query("GET_LABEL_INVALID_FIELD"):"")}else{Ee(r,"name",!0,t.query("GET_NAME"));var s=t.query("GET_CHECK_VALIDITY");s&&r.setCustomValidity(""),t.query("GET_REQUIRED")&&Ee(r,"required",!0)}},Ja=function(e){var t=e.root,r=t.query("GET_CHECK_VALIDITY");r&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},es=Z({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Za,destroy:function(e){var t=e.root;t.element.removeEventListener("change",t.ref.handleChange)},write:ie({DID_LOAD_ITEM:mn,DID_REMOVE_ITEM:mn,DID_THROW_ITEM_INVALID:Ja,DID_SET_DISABLED:jt,DID_SET_ALLOW_BROWSE:jt,DID_SET_ALLOW_DIRECTORIES_ONLY:vn,DID_SET_ALLOW_MULTIPLE:pn,DID_SET_ACCEPTED_FILE_TYPES:dn,DID_SET_CAPTURE_METHOD:gn,DID_SET_REQUIRED:En})}),In={ENTER:13,SPACE:32},ts=function(e){var t=e.root,r=e.props,n=Te("label");J(n,"for","filepond--browser-"+r.id),J(n,"id","filepond--drop-label-"+r.id),t.ref.handleKeyDown=function(o){var a=o.keyCode===In.ENTER||o.keyCode===In.SPACE;a&&(o.preventDefault(),t.ref.label.click())},t.ref.handleClick=function(o){var a=o.target===n||n.contains(o.target);a||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Tn(n,r.caption),t.appendChild(n),t.ref.label=n},Tn=function(e,t){e.innerHTML=t;var r=e.querySelector(".filepond--label-action");return r&&J(r,"tabindex","0"),t},rs=Z({name:"drop-label",ignoreRect:!0,create:ts,destroy:function(e){var t=e.root;t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:ie({DID_SET_LABEL_IDLE:function(e){var t=e.root,r=e.action;Tn(t.ref.label,r.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),ns=Z({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),is=function(e){var t=e.root,r=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(ns,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:r,translateY:n}))},os=function(e){var t=e.root,r=e.action;if(!t.ref.blob){is({root:t});return}t.ref.blob.translateX=r.position.scopeLeft,t.ref.blob.translateY=r.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},as=function(e){var t=e.root;t.ref.blob&&(t.ref.blob.opacity=0)},ss=function(e){var t=e.root;t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},us=function(e){var t=e.root,r=e.props,n=e.actions;ls({root:t,props:r,actions:n});var o=t.ref.blob;n.length===0&&o&&o.opacity===0&&(t.removeChildView(o),t.ref.blob=null)},ls=ie({DID_DRAG:os,DID_DROP:ss,DID_END_DRAG:as}),cs=Z({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:us}),_n=function(e,t){try{var r=new DataTransfer;t.forEach(function(n){n instanceof File?r.items.add(n):r.items.add(new File([n],n.name,{type:n.type}))}),e.files=r.files}catch{return!1}return!0},fs=function(e){var t=e.root;t.ref.fields={};var r=document.createElement("legend");r.textContent="Files",t.element.appendChild(r)},dt=function(e,t){return e.ref.fields[t]},kt=function(e){e.query("GET_ACTIVE_ITEMS").forEach(function(t){e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},hn=function(e){var t=e.root;return kt(t)},ds=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),o=n.origin===ee.LOCAL,a=!o&&t.query("SHOULD_UPDATE_FILE_INPUT"),s=Te("input");s.type=a?"file":"hidden",s.name=t.query("GET_NAME"),t.ref.fields[r.id]=s,kt(t)},ps=function(e){var t=e.root,r=e.action,n=dt(t,r.id);if(n&&(r.serverFileReference!==null&&(n.value=r.serverFileReference),!!t.query("SHOULD_UPDATE_FILE_INPUT"))){var o=t.query("GET_ITEM",r.id);_n(n,[o.file])}},vs=function(e){var t=e.root,r=e.action;t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(function(){var n=dt(t,r.id);n&&_n(n,[r.file])},0)},Es=function(e){var t=e.root;t.element.disabled=t.query("GET_DISABLED")},gs=function(e){var t=e.root,r=e.action,n=dt(t,r.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[r.id])},ms=function(e){var t=e.root,r=e.action,n=dt(t,r.id);n&&(r.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=r.value),kt(t))},Is=ie({DID_SET_DISABLED:Es,DID_ADD_ITEM:ds,DID_LOAD_ITEM:ps,DID_REMOVE_ITEM:gs,DID_DEFINE_VALUE:ms,DID_PREPARE_OUTPUT:vs,DID_REORDER_ITEMS:hn,DID_SORT_ITEMS:hn}),Ts=Z({tag:"fieldset",name:"data",create:fs,write:Is,ignoreRect:!0}),_s=function(e){return"getRootNode"in e?e.getRootNode():document},hs=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Rs=["css","csv","html","txt"],Os={zip:"zip|compressed",epub:"application/epub+zip"},Rn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e=e.toLowerCase(),hs.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Rs.includes(e)?"text/"+e:Os[e]||""},Xt=function(e){return new Promise(function(t,r){var n=Ls(e);if(n.length&&!ys(e))return t(n);Ss(e).then(t)})},ys=function(e){return e.files?e.files.length>0:!1},Ss=function(e){return new Promise(function(t,r){var n=(e.items?Array.from(e.items):[]).filter(function(o){return Ds(o)}).map(function(o){return bs(o)});if(!n.length){t(e.files?Array.from(e.files):[]);return}Promise.all(n).then(function(o){var a=[];o.forEach(function(s){a.push.apply(a,s)}),t(a.filter(function(s){return s}).map(function(s){return s._relativePath||(s._relativePath=s.webkitRelativePath),s}))}).catch(console.error)})},Ds=function(e){if(On(e)){var t=$t(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},bs=function(e){return new Promise(function(t,r){if(ws(e)){Ps($t(e)).then(t).catch(r);return}t([e.getAsFile()])})},Ps=function(e){return new Promise(function(t,r){var n=[],o=0,a=0,s=function(){a===0&&o===0&&t(n)},u=function l(c){o++;var f=c.createReader(),d=function E(){f.readEntries(function(m){if(m.length===0){o--,s();return}m.forEach(function(I){I.isDirectory?l(I):(a++,I.file(function(v){var _=As(v);I.fullPath&&(_._relativePath=I.fullPath),n.push(_),a--,s()}))}),E()},r)};d()};u(e)})},As=function(e){if(e.type.length)return e;var t=e.lastModifiedDate,r=e.name,n=Rn(ut(e.name));return n.length&&(e=e.slice(0,e.size,n),e.name=r,e.lastModifiedDate=t),e},ws=function(e){return On(e)&&($t(e)||{}).isDirectory},On=function(e){return"webkitGetAsEntry"in e},$t=function(e){return e.webkitGetAsEntry()},Ls=function(e){var t=[];try{if(t=Cs(e),t.length)return t;t=Ms(e)}catch{}return t},Ms=function(e){var t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},Cs=function(e){var t=e.getData("text/html");if(typeof t=="string"&&t.length){var r=t.match(/src\s*=\s*"(.+?)"/);if(r)return[r[1]]}return[]},pt=[],Le=function(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}},Ns=function(e,t,r){var n=Fs(t),o={element:e,filterElement:r,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return o.destroy=n.addListener(o),o},Fs=function(e){var t=pt.find(function(n){return n.element===e});if(t)return t;var r=Gs(e);return pt.push(r),r},Gs=function(e){var t=[],r={dragenter:Us,dragover:Vs,dragleave:qs,drop:xs},n={};U(r,function(a,s){n[a]=s(e,t),e.addEventListener(a,n[a],!1)});var o={element:e,addListener:function(s){return t.push(s),function(){t.splice(t.indexOf(s),1),t.length===0&&(pt.splice(pt.indexOf(o),1),U(r,function(u){e.removeEventListener(u,n[u],!1)}))}}};return o},Bs=function(e,t){return"elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)},Qt=function(e,t){var r=_s(t),n=Bs(r,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return n===t||t.contains(n)},yn=null,vt=function(e,t){try{e.dropEffect=t}catch{}},Us=function(e,t){return function(r){r.preventDefault(),yn=r.target,t.forEach(function(n){var o=n.element,a=n.onenter;Qt(r,o)&&(n.state="enter",a(Le(r)))})}},Vs=function(e,t){return function(r){r.preventDefault();var n=r.dataTransfer;Xt(n).then(function(o){var a=!1;t.some(function(s){var u=s.filterElement,l=s.element,c=s.onenter,f=s.onexit,d=s.ondrag,E=s.allowdrop;vt(n,"copy");var m=E(o);if(!m){vt(n,"none");return}if(Qt(r,l)){if(a=!0,s.state===null){s.state="enter",c(Le(r));return}if(s.state="over",u&&!m){vt(n,"none");return}d(Le(r))}else u&&!a&&vt(n,"none"),s.state&&(s.state=null,f(Le(r)))})})}},xs=function(e,t){return function(r){r.preventDefault();var n=r.dataTransfer;Xt(n).then(function(o){t.forEach(function(a){var s=a.filterElement,u=a.element,l=a.ondrop,c=a.onexit,f=a.allowdrop;if(a.state=null,!(s&&!Qt(r,u))){if(!f(o))return c(Le(r));l(Le(r),o)}})})}},qs=function(e,t){return function(r){yn===r.target&&t.forEach(function(n){var o=n.onexit;n.state=null,o(Le(r))})}},Ys=function(e,t,r){e.classList.add("filepond--hopper");var n=r.catchesDropsOnPage,o=r.requiresDropOnElement,a=r.filterItems,s=a===void 0?function(d){return d}:a,u=Ns(e,n?document.documentElement:e,o),l="",c="";u.allowdrop=function(d){return t(s(d))},u.ondrop=function(d,E){var m=s(E);if(!t(m)){f.ondragend(d);return}c="drag-drop",f.onload(m,d)},u.ondrag=function(d){f.ondrag(d)},u.onenter=function(d){c="drag-over",f.ondragstart(d)},u.onexit=function(d){c="drag-exit",f.ondragend(d)};var f={updateHopperState:function(){l!==c&&(e.dataset.hopperState=c,l=c)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){u.destroy()}};return f},Kt=!1,Ve=[],Sn=function(e){var t=document.activeElement,r=t&&(/textarea|input/i.test(t.nodeName)||t.getAttribute("contenteditable")==="true");if(r){for(var n=!1,o=t;o!==document.body;){if(o.classList.contains("filepond--root")){n=!0;break}o=o.parentNode}if(!n)return}Xt(e.clipboardData).then(function(a){a.length&&Ve.forEach(function(s){return s(a)})})},Hs=function(e){Ve.includes(e)||(Ve.push(e),!Kt&&(Kt=!0,document.addEventListener("paste",Sn)))},zs=function(e){wt(Ve,Ve.indexOf(e)),Ve.length===0&&(document.removeEventListener("paste",Sn),Kt=!1)},Ws=function(){var e=function(n){t.onload(n)},t={destroy:function(){zs(e)},onload:function(){}};return Hs(e),t},js=function(e){var t=e.root,r=e.props;t.element.id="filepond--assistant-"+r.id,J(t.element,"role","alert"),J(t.element,"aria-live","polite"),J(t.element,"aria-relevant","additions")},Dn=null,bn=null,Zt=[],Et=function(e,t){e.element.textContent=t},ks=function(e){e.element.textContent=""},Pn=function(e,t,r){var n=e.query("GET_TOTAL_ITEMS");Et(e,r+" "+t+", "+n+" "+(n===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(bn),bn=setTimeout(function(){ks(e)},1500)},An=function(e){return e.element.parentNode.contains(document.activeElement)},Xs=function(e){var t=e.root,r=e.action;if(An(t)){t.element.textContent="";var n=t.query("GET_ITEM",r.id);Zt.push(n.filename),clearTimeout(Dn),Dn=setTimeout(function(){Pn(t,Zt.join(", "),t.query("GET_LABEL_FILE_ADDED")),Zt.length=0},750)}},$s=function(e){var t=e.root,r=e.action;if(An(t)){var n=r.item;Pn(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))}},Qs=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),o=n.filename,a=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Et(t,o+" "+a)},wn=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),o=n.filename,a=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Et(t,o+" "+a)},gt=function(e){var t=e.root,r=e.action,n=t.query("GET_ITEM",r.id),o=n.filename;Et(t,r.status.main+" "+o+" "+r.status.sub)},Ks=Z({create:js,ignoreRect:!0,ignoreRectUpdate:!0,write:ie({DID_LOAD_ITEM:Xs,DID_REMOVE_ITEM:$s,DID_COMPLETE_ITEM_PROCESSING:Qs,DID_ABORT_ITEM_PROCESSING:wn,DID_REVERT_ITEM_PROCESSING:wn,DID_THROW_ITEM_REMOVE_ERROR:gt,DID_THROW_ITEM_LOAD_ERROR:gt,DID_THROW_ITEM_INVALID:gt,DID_THROW_ITEM_PROCESSING_ERROR:gt}),tag:"span",name:"assistant"}),Ln=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return e.replace(new RegExp(t+".","g"),function(r){return r.charAt(1).toUpperCase()})},Mn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=Date.now(),o=null;return function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];clearTimeout(o);var l=Date.now()-n,c=function(){n=Date.now(),e.apply(void 0,s)};l<t?r||(o=setTimeout(c,t-l)):c()}},Zs=1e6,mt=function(e){return e.preventDefault()},Js=function(e){var t=e.root,r=e.props,n=t.query("GET_ID");n&&(t.element.id=n);var o=t.query("GET_CLASS_NAME");o&&o.split(" ").filter(function(f){return f.length}).forEach(function(f){t.element.classList.add(f)}),t.ref.label=t.appendChildView(t.createChildView(rs,Object.assign({},r,{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(Qa,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(sn,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Ks,Object.assign({},r))),t.ref.data=t.appendChildView(t.createChildView(Ts,Object.assign({},r))),t.ref.measure=Te("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(function(f){return!Ie(f.value)}).map(function(f){var d=f.name,E=f.value;t.element.dataset[d]=E}),t.ref.widthPrevious=null,t.ref.widthUpdated=Mn(function(){t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];var a=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&s&&!a&&(t.element.addEventListener("touchmove",mt,{passive:!1}),t.element.addEventListener("gesturestart",mt));var u=t.query("GET_CREDITS"),l=u.length===2;if(l){var c=document.createElement("a");c.className="filepond--credits",c.href=u[0],c.tabIndex=-1,c.target="_blank",c.rel="noopener noreferrer nofollow",c.textContent=u[1],t.element.appendChild(c),t.ref.credits=c}},eu=function(e){var t=e.root,r=e.props,n=e.actions;if(ou({root:t,props:r,actions:n}),n.filter(function(q){return/^DID_SET_STYLE_/.test(q.type)}).filter(function(q){return!Ie(q.data.value)}).map(function(q){var k=q.type,$=q.data,xe=Ln(k.substring(8).toLowerCase(),"_");t.element.dataset[xe]=$.value,t.invalidateLayout()}),!t.rect.element.hidden){t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());var o=t.ref.bounds;o||(o=t.ref.bounds=nu(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);var a=t.ref,s=a.hopper,u=a.label,l=a.list,c=a.panel;s&&s.updateHopperState();var f=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),E=t.query("GET_TOTAL_ITEMS"),m=d?t.query("GET_MAX_FILES")||Zs:1,I=E===m,v=n.find(function(q){return q.type==="DID_ADD_ITEM"});if(I&&v){var _=v.data.interactionMethod;u.opacity=0,d?u.translateY=-40:_===ce.API?u.translateX=40:_===ce.BROWSE?u.translateY=40:u.translateY=30}else I||(u.opacity=1,u.translateX=0,u.translateY=0);var S=tu(t),P=ru(t),h=u.rect.element.height,G=!d||I?0:h,R=I?l.rect.element.marginTop:0,H=E===0?0:l.rect.element.marginBottom,z=G+R+P.visual+H,y=G+R+P.bounds+H;if(l.translateY=Math.max(0,G-l.rect.element.marginTop)-S.top,f){var A=t.rect.element.width,w=A*f;f!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=f,t.ref.updateHistory=[]);var O=t.ref.updateHistory;O.push(A);var D=2;if(O.length>D*2){for(var L=O.length,W=L-10,Y=0,M=L;M>=W;M--)if(O[M]===O[M-2]&&Y++,Y>=D)return}c.scalable=!1,c.height=w;var T=w-G-(H-S.bottom)-(I?R:0);P.visual>T?l.overflow=T:l.overflow=null,t.height=w}else if(o.fixedHeight){c.scalable=!1;var p=o.fixedHeight-G-(H-S.bottom)-(I?R:0);P.visual>p?l.overflow=p:l.overflow=null}else if(o.cappedHeight){var b=z>=o.cappedHeight,F=Math.min(o.cappedHeight,z);c.scalable=!0,c.height=b?F:F-S.top-S.bottom;var B=F-G-(H-S.bottom)-(I?R:0);z>o.cappedHeight&&P.visual>B?l.overflow=B:l.overflow=null,t.height=Math.min(o.cappedHeight,y-S.top-S.bottom)}else{var V=E>0?S.top+S.bottom:0;c.scalable=!0,c.height=Math.max(h,z-V),t.height=Math.max(h,y-V)}t.ref.credits&&c.heightCurrent&&(t.ref.credits.style.transform="translateY("+c.heightCurrent+"px)")}},tu=function(e){var t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},ru=function(e){var t=0,r=0,n=e.ref.list,o=n.childViews[0],a=o.childViews.filter(function(P){return P.rect.element.height}),s=e.query("GET_ACTIVE_ITEMS").map(function(P){return a.find(function(h){return h.id===P.id})}).filter(function(P){return P});if(s.length===0)return{visual:t,bounds:r};var u=o.rect.element.width,l=zt(o,s,n.dragCoordinates),c=s[0].rect.element,f=c.marginTop+c.marginBottom,d=c.marginLeft+c.marginRight,E=c.width+d,m=c.height+f,I=typeof l<"u"&&l>=0?1:0,v=s.find(function(P){return P.markedForRemoval&&P.opacity<.45})?-1:0,_=s.length+I+v,S=Ht(u,E);return S===1?s.forEach(function(P){var h=P.rect.element.height+f;r+=h,t+=h*P.opacity}):(r=Math.ceil(_/S)*m,t=r),{visual:t,bounds:r}},nu=function(e){var t=e.ref.measureHeight||null,r=parseInt(e.style.maxHeight,10)||null,n=t===0?null:t;return{cappedHeight:r,fixedHeight:n}},Jt=function(e,t){var r=e.query("GET_ALLOW_REPLACE"),n=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS"),a=e.query("GET_MAX_FILES"),s=t.length;if(!n&&s>1)return e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Q("warning",0,"Max files")}),!0;if(a=n?a:1,!n&&r)return!1;var u=Ne(a);return u&&o+s>a?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Q("warning",0,"Max files")}),!0):!1},iu=function(e,t,r){var n=e.childViews[0];return zt(n,t,{left:r.scopeLeft-n.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Cn=function(e){var t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),n=t&&!r;if(n&&!e.ref.hopper){var o=Ys(e.element,function(a){var s=e.query("GET_BEFORE_DROP_FILE")||function(){return!0},u=e.query("GET_DROP_VALIDATION");return u?a.every(function(l){return De("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(function(c){return c===!0})&&s(l)}):!0},{filterItems:function(s){var u=e.query("GET_IGNORED_FILES");return s.filter(function(l){return we(l)?!u.includes(l.name.toLowerCase()):!0})},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});o.onload=function(a,s){var u=e.ref.list.childViews[0],l=u.childViews.filter(function(f){return f.rect.element.height}),c=e.query("GET_ACTIVE_ITEMS").map(function(f){return l.find(function(d){return d.id===f.id})}).filter(function(f){return f});pe("ADD_ITEMS",a,{dispatch:e.dispatch}).then(function(f){if(Jt(e,f))return!1;e.dispatch("ADD_ITEMS",{items:f,index:iu(e.ref.list,c,s),interactionMethod:ce.DROP})}),e.dispatch("DID_DROP",{position:s}),e.dispatch("DID_END_DRAG",{position:s})},o.ondragstart=function(a){e.dispatch("DID_START_DRAG",{position:a})},o.ondrag=Mn(function(a){e.dispatch("DID_DRAG",{position:a})}),o.ondragend=function(a){e.dispatch("DID_END_DRAG",{position:a})},e.ref.hopper=o,e.ref.drip=e.appendChildView(e.createChildView(cs))}else!n&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Nn=function(e,t){var r=e.query("GET_ALLOW_BROWSE"),n=e.query("GET_DISABLED"),o=r&&!n;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(es,Object.assign({},t,{onload:function(s){pe("ADD_ITEMS",s,{dispatch:e.dispatch}).then(function(u){if(Jt(e,u))return!1;e.dispatch("ADD_ITEMS",{items:u,index:-1,interactionMethod:ce.BROWSE})})}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Fn=function(e){var t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),n=t&&!r;n&&!e.ref.paster?(e.ref.paster=Ws(),e.ref.paster.onload=function(o){pe("ADD_ITEMS",o,{dispatch:e.dispatch}).then(function(a){if(Jt(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:ce.PASTE})})}):!n&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},ou=ie({DID_SET_ALLOW_BROWSE:function(e){var t=e.root,r=e.props;Nn(t,r)},DID_SET_ALLOW_DROP:function(e){var t=e.root;Cn(t)},DID_SET_ALLOW_PASTE:function(e){var t=e.root;Fn(t)},DID_SET_DISABLED:function(e){var t=e.root,r=e.props;Cn(t),Fn(t),Nn(t,r);var n=t.query("GET_DISABLED");n?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),au=Z({name:"root",read:function(e){var t=e.root;t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:Js,write:eu,destroy:function(e){var t=e.root;t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",mt),t.element.removeEventListener("gesturestart",mt)},mixins:{styles:["height"]}}),su=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=null,r=at(),n=X(zi(r),[Do,ki(r)],[Zo,ji(r)]);n.dispatch("SET_OPTIONS",{options:e});var o=function(){document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",o);var a=null,s=!1,u=!1,l=null,c=null,f=function(){s||(s=!0),clearTimeout(a),a=setTimeout(function(){s=!1,l=null,c=null,u&&(u=!1,n.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",f);var d=au(n,{id:Rt()}),E=!1,m=!1,I={_read:function(){s&&(c=window.innerWidth,l||(l=c),!u&&c!==l&&(n.dispatch("DID_START_RESIZE"),u=!0)),m&&E&&(E=d.element.offsetParent===null),!E&&(d._read(),m=d.rect.element.hidden)},_write:function(T){var p=n.processActionQueue().filter(function(b){return!/^SET_/.test(b.type)});E&&!p.length||(P(p),E=d._write(T,p,u),vo(n.query("GET_ITEMS")),E&&n.processDispatchQueue())}},v=function(T){return function(p){var b={type:T};if(!p)return b;if(p.hasOwnProperty("error")&&(b.error=p.error?Object.assign({},p.error):null),p.status&&(b.status=Object.assign({},p.status)),p.file&&(b.output=p.file),p.source)b.file=p.source;else if(p.item||p.id){var F=p.item?p.item:n.query("GET_ITEM",p.id);b.file=F?ae(F):null}return p.items&&(b.items=p.items.map(ae)),/progress/.test(T)&&(b.progress=p.progress),p.hasOwnProperty("origin")&&p.hasOwnProperty("target")&&(b.origin=p.origin,b.target=p.target),b}},_={DID_DESTROY:v("destroy"),DID_INIT:v("init"),DID_THROW_MAX_FILES:v("warning"),DID_INIT_ITEM:v("initfile"),DID_START_ITEM_LOAD:v("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:v("addfileprogress"),DID_LOAD_ITEM:v("addfile"),DID_THROW_ITEM_INVALID:[v("error"),v("addfile")],DID_THROW_ITEM_LOAD_ERROR:[v("error"),v("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[v("error"),v("removefile")],DID_PREPARE_OUTPUT:v("preparefile"),DID_START_ITEM_PROCESSING:v("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:v("processfileprogress"),DID_ABORT_ITEM_PROCESSING:v("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:v("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:v("processfiles"),DID_REVERT_ITEM_PROCESSING:v("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[v("error"),v("processfile")],DID_REMOVE_ITEM:v("removefile"),DID_UPDATE_ITEMS:v("updatefiles"),DID_ACTIVATE_ITEM:v("activatefile"),DID_REORDER_ITEMS:v("reorderfiles")},S=function(T){var p=Object.assign({pond:Y},T);delete p.type,d.element.dispatchEvent(new CustomEvent("FilePond:"+T.type,{detail:p,bubbles:!0,cancelable:!0,composed:!0}));var b=[];T.hasOwnProperty("error")&&b.push(T.error),T.hasOwnProperty("file")&&b.push(T.file);var F=["type","error","file"];Object.keys(T).filter(function(V){return!F.includes(V)}).forEach(function(V){return b.push(T[V])}),Y.fire.apply(Y,[T.type].concat(b));var B=n.query("GET_ON"+T.type.toUpperCase());B&&B.apply(void 0,b)},P=function(T){T.length&&T.filter(function(p){return _[p.type]}).forEach(function(p){var b=_[p.type];(Array.isArray(b)?b:[b]).forEach(function(F){p.type==="DID_INIT_ITEM"?S(F(p.data)):setTimeout(function(){S(F(p.data))},0)})})},h=function(T){return n.dispatch("SET_OPTIONS",{options:T})},G=function(T){return n.query("GET_ACTIVE_ITEM",T)},R=function(T){return new Promise(function(p,b){n.dispatch("REQUEST_ITEM_PREPARE",{query:T,success:function(B){p(B)},failure:function(B){b(B)}})})},H=function(T){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(b,F){A([{source:T,options:p}],{index:p.index}).then(function(B){return b(B&&B[0])}).catch(F)})},z=function(T){return T.file&&T.id},y=function(T,p){return typeof T=="object"&&!z(T)&&!p&&(p=T,T=void 0),n.dispatch("REMOVE_ITEM",Object.assign({},p,{query:T})),n.query("GET_ACTIVE_ITEM",T)===null},A=function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];return new Promise(function(F,B){var V=[],q={};if(Ke(p[0]))V.push.apply(V,p[0]),Object.assign(q,p[1]||{});else{var k=p[p.length-1];typeof k=="object"&&!(k instanceof Blob)&&Object.assign(q,p.pop()),V.push.apply(V,p)}n.dispatch("ADD_ITEMS",{items:V,index:q.index,interactionMethod:ce.API,success:F,failure:B})})},w=function(){return n.query("GET_ACTIVE_ITEMS")},O=function(T){return new Promise(function(p,b){n.dispatch("REQUEST_ITEM_PROCESSING",{query:T,success:function(B){p(B)},failure:function(B){b(B)}})})},D=function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];var F=Array.isArray(p[0])?p[0]:p,B=F.length?F:w();return Promise.all(B.map(R))},L=function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];var F=Array.isArray(p[0])?p[0]:p;if(!F.length){var B=w().filter(function(V){return!(V.status===N.IDLE&&V.origin===ee.LOCAL)&&V.status!==N.PROCESSING&&V.status!==N.PROCESSING_COMPLETE&&V.status!==N.PROCESSING_REVERT_ERROR});return Promise.all(B.map(O))}return Promise.all(F.map(O))},W=function(){for(var T=arguments.length,p=new Array(T),b=0;b<T;b++)p[b]=arguments[b];var F=Array.isArray(p[0])?p[0]:p,B;typeof F[F.length-1]=="object"?B=F.pop():Array.isArray(p[0])&&(B=p[1]);var V=w();if(!F.length)return Promise.all(V.map(function(k){return y(k,B)}));var q=F.map(function(k){return ye(k)?V[k]?V[k].id:null:k}).filter(function(k){return k});return q.map(function(k){return y(k,B)})},Y=Object.assign({},ot(),{},I,{},Wi(n,r),{setOptions:h,addFile:H,addFiles:A,getFile:G,processFile:O,prepareFile:R,removeFile:y,moveFile:function(T,p){return n.dispatch("MOVE_ITEM",{query:T,index:p})},getFiles:w,processFiles:L,removeFiles:W,prepareFiles:D,sort:function(T){return n.dispatch("SORT",{compare:T})},browse:function(){var T=d.element.querySelector("input[type=file]");T&&T.click()},destroy:function(){Y.fire("destroy",d.element),n.dispatch("ABORT_ALL"),d._destroy(),window.removeEventListener("resize",f),document.removeEventListener("visibilitychange",o),n.dispatch("DID_DESTROY")},insertBefore:function(T){return fr(d.element,T)},insertAfter:function(T){return dr(d.element,T)},appendTo:function(T){return T.appendChild(d.element)},replaceElement:function(T){fr(d.element,T),T.parentNode.removeChild(T),t=T},restoreElement:function(){t&&(dr(t,d.element),d.element.parentNode.removeChild(d.element),t=null)},isAttachedTo:function(T){return d.element===T||t===T},element:{get:function(){return d.element}},status:{get:function(){return n.query("GET_STATUS")}}});return n.dispatch("DID_INIT"),ue(Y)},Gn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={};U(at(),function(n,o){t[n]=o[0]});var r=su(Object.assign({},t,{},e));return r},uu=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},lu=function(e){return Ln(e.replace(/^data-/,""))},cu=function i(e,t){U(t,function(r,n){U(e,function(o,a){var s=new RegExp(r),u=s.test(o);if(u&&(delete e[o],n!==!1)){if(oe(n)){e[n]=a;return}var l=n.group;re(n)&&!e[l]&&(e[l]={}),e[l][uu(o.replace(s,""))]=a}}),n.mapping&&i(e[n.group],n.mapping)})},fu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];U(e.attributes,function(o){r.push(e.attributes[o])});var n=r.filter(function(o){return o.name}).reduce(function(o,a){var s=J(e,a.name);return o[lu(a.name)]=s===a.name?!0:s,o},{});return cu(n,t),n},du=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};De("SET_ATTRIBUTE_TO_OPTION_MAP",r);var n=Object.assign({},t),o=fu(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,r);Object.keys(o).forEach(function(s){re(o[s])?(re(n[s])||(n[s]={}),Object.assign(n[s],o[s])):n[s]=o[s]}),n.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(function(s){return{source:s.value,options:{type:s.dataset.type}}}));var a=Gn(n);return e.files&&Array.from(e.files).forEach(function(s){a.addFile(s)}),a.replaceElement(e),a},pu=function(){return ge(arguments.length<=0?void 0:arguments[0])?du.apply(void 0,arguments):Gn.apply(void 0,arguments)},vu=["fire","_read","_write"],Bn=function(e){var t={};return Mr(e,t,vu),t},Eu=function(e,t){return e.replace(/(?:{([a-zA-Z]+)})/g,function(r,n){return t[n]})},gu=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),n=new Worker(r);return{transfer:function(a,s){},post:function(a,s,u){var l=Rt();n.onmessage=function(c){c.data.id===l&&s(c.data.message)},n.postMessage({id:l,message:a},u)},terminate:function(){n.terminate(),URL.revokeObjectURL(r)}}},mu=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=function(o){r(o)},n.src=e})},Un=function(e,t){var r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},Iu=function(e){return Un(e,e.name)},Vn=[],Tu=function(e){if(!Vn.includes(e)){Vn.push(e);var t=e({addFilter:go,utils:{Type:g,forin:U,isString:oe,isFile:we,toNaturalFileSize:Zr,replaceInString:Eu,getExtensionFromFilename:ut,getFilenameWithoutExtension:zr,guesstimateMimeType:Rn,getFileFromBlob:Be,getFilenameFromURL:We,createRoute:ie,createWorker:gu,createView:Z,createItemAPI:ae,loadImage:mu,copyFile:Iu,renameFile:Un,createBlob:Vr,applyFilterChain:pe,text:K,getNumericAspectRatioFromString:Fr},views:{fileActionButton:Kr}});mo(t.options)}},_u=function(){return Object.prototype.toString.call(window.operamini)==="[object OperaMini]"},hu=function(){return"Promise"in window},Ru=function(){return"slice"in Blob.prototype},Ou=function(){return"URL"in window&&"createObjectURL"in window.URL},yu=function(){return"visibilityState"in document},Su=function(){return"performance"in window},Du=function(){return"supports"in(window.CSS||{})},bu=function(){return/MSIE|Trident/.test(window.navigator.userAgent)},er=function(){var i=or()&&!_u()&&yu()&&hu()&&Ru()&&Ou()&&Su()&&(Du()||bu());return function(){return i}}(),Re={apps:[]},Pu="filepond",Me=function(){};if(C.Status={},C.FileStatus={},C.FileOrigin={},C.OptionTypes={},C.create=Me,C.destroy=Me,C.parse=Me,C.find=Me,C.registerPlugin=Me,C.getOptions=Me,C.setOptions=Me,er()){wi(function(){Re.apps.forEach(function(i){return i._read()})},function(i){Re.apps.forEach(function(e){return e._write(i)})});var xn=function i(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:er,create:C.create,destroy:C.destroy,parse:C.parse,find:C.find,registerPlugin:C.registerPlugin,setOptions:C.setOptions}})),document.removeEventListener("DOMContentLoaded",i)};document.readyState!=="loading"?setTimeout(function(){return xn()},0):document.addEventListener("DOMContentLoaded",xn);var qn=function(){return U(at(),function(e,t){C.OptionTypes[e]=t[1]})};C.Status=Object.assign({},Ge),C.FileOrigin=Object.assign({},ee),C.FileStatus=Object.assign({},N),C.OptionTypes={},qn(),C.create=function(){var e=pu.apply(void 0,arguments);return e.on("destroy",C.destroy),Re.apps.push(e),Bn(e)},C.destroy=function(e){var t=Re.apps.findIndex(function(n){return n.isAttachedTo(e)});if(t>=0){var r=Re.apps.splice(t,1)[0];return r.restoreElement(),!0}return!1},C.parse=function(e){var t=Array.from(e.querySelectorAll("."+Pu)),r=t.filter(function(n){return!Re.apps.find(function(o){return o.isAttachedTo(n)})});return r.map(function(n){return C.create(n)})},C.find=function(e){var t=Re.apps.find(function(r){return r.isAttachedTo(e)});return t?Bn(t):null},C.registerPlugin=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(Tu),qn()},C.getOptions=function(){var e={};return U(at(),function(t,r){e[t]=r[0]}),e},C.setOptions=function(e){return re(e)&&(Re.apps.forEach(function(t){t.setOptions(e)}),Io(e)),C.getOptions()}}C.supported=er,Object.defineProperty(C,"__esModule",{value:!0})})});var Tt=Xn(nr(),1),xu=Xn(nr(),1);var Bu=(0,Tt.supported)(),Uu=["id","name","class","multiple","required","disabled","capture","accept"],Vu=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],ai=["oninit","onwarning","onerror","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onactivatefile","onreorderfiles"],Vl=(()=>{class C{constructor(X,me){this.options={},this.oninit=new te,this.onwarning=new te,this.onerror=new te,this.oninitfile=new te,this.onactivatefile=new te,this.onaddfilestart=new te,this.onaddfileprogress=new te,this.onaddfile=new te,this.onprocessfilestart=new te,this.onprocessfileprogress=new te,this.onprocessfileabort=new te,this.onprocessfilerevert=new te,this.onprocessfile=new te,this.onprocessfiles=new te,this.onremovefile=new te,this.onpreparefile=new te,this.onupdatefiles=new te,this.onreorderfiles=new te,this.pond=null,this.handleEvent=null,this.root=X,this.zone=me}ngAfterViewInit(){let X=this.root.nativeElement.querySelector("input"),me=this.root.nativeElement.attributes;Uu.forEach(U=>{let ue=me[U]?me[U].value:this.options[U];ue&&X.setAttribute(U,ue)}),Bu&&(this.handleEvent=U=>{let ue=`on${U.type.split(":")[1]}`;this[ue].emit(tr({},U.detail))},ai.forEach(U=>{this.root.nativeElement.addEventListener(`FilePond:${U.substring(2)}`,this.handleEvent)}),this.zone.runOutsideAngular(()=>{this.pond=(0,Tt.create)(X,kn(tr({},this.options),{files:this.files}))}),this.pond&&Object.keys(this.pond).filter(U=>Vu.indexOf(U)===-1).forEach(U=>{this[U]=this.pond[U]}))}ngOnChanges(X){if(X.firstChange||!this.pond)return;let me=X.options?X.options.currentValue:this.options;X.files&&JSON.stringify(X.files.previousValue)!==JSON.stringify(X.files.currentValue)&&(me.files=X.files.currentValue),this.pond.setOptions(me)}ngOnDestroy(){this.pond&&(ai.forEach(X=>{this.root.nativeElement.removeEventListener(`FilePond:${X.substring(2)}`,this.handleEvent)}),this.pond.destroy())}}return C.\u0275fac=function(X){return new(X||C)(rr(ei),rr(Jn))},C.\u0275cmp=Qn({type:C,selectors:[["file-pond"]],inputs:{options:"options",files:"files"},outputs:{oninit:"oninit",onwarning:"onwarning",onerror:"onerror",oninitfile:"oninitfile",onactivatefile:"onactivatefile",onaddfilestart:"onaddfilestart",onaddfileprogress:"onaddfileprogress",onaddfile:"onaddfile",onprocessfilestart:"onprocessfilestart",onprocessfileprogress:"onprocessfileprogress",onprocessfileabort:"onprocessfileabort",onprocessfilerevert:"onprocessfilerevert",onprocessfile:"onprocessfile",onprocessfiles:"onprocessfiles",onremovefile:"onremovefile",onpreparefile:"onpreparefile",onupdatefiles:"onupdatefiles",onreorderfiles:"onreorderfiles"},features:[Zn],decls:2,vars:0,consts:[[1,"filepond--wrapper"],["type","file"]],template:function(X,me){X&1&&(ti(0,"div",0),ni(1,"input",1),ri())},encapsulation:2}),C})(),xl=(()=>{class C{}return C.\u0275fac=function(X){return new(X||C)},C.\u0275mod=Kn({type:C}),C.\u0275inj=$n({imports:[ii]}),C})();export{Vl as a,xl as b};
