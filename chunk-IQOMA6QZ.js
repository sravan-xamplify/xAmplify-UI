import{a as ce,b as k,c as de,d as L,e as I,f as V,g as ge,h as pe}from"./chunk-3CCSRZ3J.js";import"./chunk-OJR25IT7.js";import"./chunk-HX3ESI56.js";import{d as A,e as q,h as z}from"./chunk-ORXYENZX.js";import"./chunk-ZG2FADVK.js";import{Ga as re,Ha as ne,Ia as oe,J,Ja as ae,Ka as se,L as N,Ma as le,Na as me,O as H,P as K,V as Q,Z as X,_ as Y,ba as $,da as ee,ea as te,fa as ie,gb as ue}from"./chunk-LYTJFACJ.js";import{Ca as D,Jc as B,Kc as l,Lc as O,Mc as U,Na as d,Oa as g,Oc as F,Pb as _,Pc as E,Qc as M,Rc as G,Sc as Z,Tc as b,Ub as u,Wb as T,Xa as W,Zb as x,_a as j,cc as P,hc as t,ic as n,jc as m,nc as C,ra as y,wa as S,wc as v,yb as s,yc as c,zb as p}from"./chunk-7QP7SMW2.js";import"./chunk-2EBTC7QX.js";import"./chunk-66YHNWRR.js";var f=class a{constructor(){k.initializeApp(ge.firebase)}getFirestore(){return V}getDatabase(){return I}getAuth(){return L}static \u0275fac=function(e){return new(e||a)};static \u0275prov=y({token:a,factory:a.\u0275fac,providedIn:"root"})};var R=class a{constructor(i,e,r){this.afu=i;this.router=e;this.ngZone=r;this.afu.authState.subscribe(o=>{this.authState=o})}authState;afAuth;afs;showLoader=!1;get isUserAnonymousLoggedIn(){return this.authState!==null?this.authState.isAnonymous:!1}get currentUserId(){return this.authState!==null?this.authState.uid:""}get currentUserName(){return this.authState.email}get currentUser(){return this.authState!==null?this.authState:null}get isUserEmailLoggedIn(){return this.authState!==null&&!this.isUserAnonymousLoggedIn}registerWithEmail(i,e){return this.afu.createUserWithEmailAndPassword(i,e).then(r=>{this.authState=r}).catch(r=>{throw console.log(r),r})}loginWithEmail(i,e){return this.afu.signInWithEmailAndPassword(i,e).then(r=>{this.authState=r}).catch(r=>{throw console.log(r),r})}singout(){this.afu.signOut(),this.router.navigate(["/login"])}SignUp(i,e){return this.afAuth.createUserWithEmailAndPassword(i,e).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(i=>i.sendEmailVerification()).then(()=>{this.router.navigate(["/sales"])})}SetUserData(i){let e=this.afs.doc(`users/${i.uid}`),r={email:i.email,displayName:i.displayName,uid:i.uid,photoURL:i.photoURL||"src/favicon.ico",emailVerified:i.emailVerified};return e.delete().then(function(){}).catch(function(o){}),e.set(r,{merge:!0})}SignIn(i,e){return this.afAuth.signInWithEmailAndPassword(i,e).then(r=>{r.user.emailVerified!==!0?(this.SetUserData(r.user),this.SendVerificationMail(),this.showLoader=!0):(this.showLoader=!1,this.ngZone.run(()=>{this.router.navigate(["/auth/login"])}))}).catch(r=>{throw r})}ForgotPassword(i){return this.afAuth.sendPasswordResetEmail(i).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(e=>{window.alert(e)})}static \u0275fac=function(e){return new(e||a)(S(de),S(A),S(W))};static \u0275prov=y({token:a,factory:a.\u0275fac,providedIn:"root"})};var Se=()=>["/sales"],_e=()=>["/authentication/sign-up/basic"],ve=()=>["/authentication/reset-password/basic"];function xe(a,i){if(a&1&&(t(0,"p",31),l(1),n()),a&2){let e=c(2);s(),U(" ",e.errorMessage," ")}}function Ce(a,i){if(a&1&&(t(0,"p",31),l(1),n()),a&2){let e=c(2);s(),U(" ",e._error.message," ")}}function Fe(a,i){if(a&1){let e=C();t(0,"form",30),v("ngSubmit",function(){d(e);let o=c();return g(o.login())}),_(1,xe,2,1,"p",31)(2,Ce,2,1,"p",31),t(3,"div",32)(4,"label",33),l(5,"User Name"),n(),t(6,"input",34),M("ngModelChange",function(o){d(e);let h=c();return E(h.email,o)||(h.email=o),g(o)}),n()(),t(7,"div",35)(8,"label",36),l(9,"Password"),t(10,"a",37),l(11,"Forget password ?"),n()(),t(12,"div",38)(13,"input",39),M("ngModelChange",function(o){d(e);let h=c();return E(h.password,o)||(h.password=o),g(o)}),n(),t(14,"button",40),v("click",function(){d(e);let o=c();return g(o.toggleVisibility())}),m(15,"i"),n()(),t(16,"div",41)(17,"div",42),m(18,"input",43),t(19,"label",44),l(20," Remember password ? "),n()()()(),t(21,"div",45)(22,"button",46),l(23," Sign In "),n()()()}if(a&2){let e=c();u("formGroup",e.loginForm),s(),P(e.errorMessage.length>0?1:-1),s(),P(e._error.message.length>0?2:-1),s(4),F("ngModel",e.email),s(4),u("routerLink",b(16,ve)),s(3),u("type",e.showPassword?"text":"password"),F("ngModel",e.password),s(2),x("",e.toggleClass," align-middle"),s(7),x("btn btn-lg btn-primary",e.disabled,""),T("loader--text",e.authservice.showLoader),u("disabled",!e.loginForm.valid||e.authservice.showLoader)}}function Ee(a,i){if(a&1){let e=C();t(0,"form",30),v("ngSubmit",function(){d(e);let o=c();return g(o.Submit())}),t(1,"div",31),l(2),n(),t(3,"div",32)(4,"label",33),l(5,"User Name"),n(),m(6,"input",47),n(),t(7,"div",35)(8,"label",36),l(9,"Password "),t(10,"a",37),l(11,"Forget password ?"),n()(),t(12,"div",38),m(13,"input",48),t(14,"button",40),v("click",function(){d(e);let o=c();return g(o.toggleVisibility())}),m(15,"i"),n()(),t(16,"div",41)(17,"div",42),m(18,"input",43),t(19,"label",44),l(20," Remember password ? "),n()()()(),t(21,"div",45)(22,"button",49),l(23,"Sign In"),n()()()}if(a&2){let e=c();u("formGroup",e.loginForm),s(2),O(e.error),s(8),u("routerLink",b(8,ve)),s(3),u("type",e.showPassword?"text":"password"),s(2),x("",e.toggleClass," align-middle"),s(7),u("disabled",!e.loginForm.valid||e.authservice.showLoader)}}var fe=class a{constructor(i,e,r,o,h,w,Me){this.elementRef=i;this.authservice=e;this.router=r;this.formBuilder=o;this.firebaseService=h;this.toastr=w;this.appStateService=Me;document.body.classList.add("authentication-background"),this.elementRef.nativeElement.ownerDocument.documentElement.removeAttribute("style")}showPassword=!1;toggleClass="ri-eye-off-line";active="Angular";firestoreModule;databaseModule;authModule;togglePassword(){this.showPassword=!this.showPassword,this.toggleClass==="ri-eye-line"?this.toggleClass="ri-eye-off-line":this.toggleClass="ri-eye-line"}disabled="";ngOnInit(){this.loginForm=this.formBuilder.group({username:["spruko@admin.com",[N.required,N.email]],password:["sprukoadmin",N.required]}),this.firestoreModule=this.firebaseService.getFirestore(),this.databaseModule=this.firebaseService.getDatabase(),this.authModule=this.firebaseService.getAuth()}ngOnDestroy(){document.body.classList.remove("authentication-background")}email="spruko@admin.com";password="sprukoadmin";errorMessage="";_error={name:"",message:""};clearErrorMessage(){this.errorMessage="",this._error={name:"",message:""}}login(){this.clearErrorMessage(),this.validateForm(this.email,this.password)&&this.authservice.loginWithEmail(this.email,this.password).then(()=>{this.router.navigate(["/sales"]),console.clear()}).catch(i=>{this._error=i,this.router.navigate(["/"])})}validateForm(i,e){return i.length===0?(this.errorMessage="please enter email id",!1):e.length===0?(this.errorMessage="please enter password",!1):e.length<6?(this.errorMessage="password should be at least 6 char",!1):(this.errorMessage="",!0)}loginForm;error="";get form(){return this.loginForm.controls}Submit(){this.loginForm.controls.username.value==="spruko@admin.com"&&this.loginForm.controls.password.value==="sprukoadmin"?(this.router.navigate(["/sales"]),this.toastr.success("login successful","Zynix",{timeOut:3e3,positionClass:"toast-top-right"})):this.toastr.error("Invalid details","Zynix",{timeOut:3e3,positionClass:"toast-top-right"})}toggleVisibility(){this.showPassword=!this.showPassword,this.toggleClass==="ri-eye-line"?this.toggleClass="ri-eye-off-line":this.toggleClass="ri-eye-line"}static \u0275fac=function(e){return new(e||a)(p(j),p(R),p(A),p(ee),p(f),p(pe),p(ce))};static \u0275cmp=D({type:a,selectors:[["app-login"]],standalone:!0,features:[G([f]),Z],decls:39,vars:6,consts:[["nav","ngbNav"],[1,"container"],[1,"row","justify-content-center","align-items-center","authentication","authentication-basic","h-100"],[1,"col-xxl-4","col-xl-5","col-lg-5","col-md-6","col-sm-8","col-12"],[1,"my-4","d-flex","justify-content-center"],[3,"routerLink"],["src","./assets/images/brand-logos/desktop-dark.png","alt","logo",1,"desktop-dark"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],["ngbNavItem","Firebase",1,"me-2"],["ngbNavLink",""],["src","./assets/images/firebase.svg","alt","",1,"firebase"],["ngbNavContent",""],["ngbNavItem","Angular"],["src","./assets/images/angular.svg","alt","",1,"firebase"],["ngbNavContent","",1,"mt-2"],[1,"card","custom-card"],[1,"card-body","p-5"],[1,"h4","mb-2","fw-semibold"],[1,"mb-4","text-muted","fw-normal"],[1,"login-option"],[1,"",3,"ngbNavOutlet"],[1,"text-center"],[1,"fs-12","text-muted","mt-3"],[1,"text-primary",3,"routerLink"],[1,"text-center","my-3","authentication-barrier"],[1,"btn-list","text-center"],[1,"btn","btn-icon","btn-light"],[1,"ri-facebook-line","fw-bold","text-dark","op-7"],[1,"ri-google-line","fw-bold","text-dark","op-7"],[1,"ri-twitter-x-line","fw-bold","text-dark","op-7"],[3,"ngSubmit","formGroup"],[1,"text-danger"],[1,"col-xl-12"],["for","signin-username",1,"form-label","text-default"],["type","text","id","signin-username","placeholder","user name","autocomplete","","formControlName","username","required","",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"col-xl-12","mb-2"],["for","signin-password",1,"form-label","text-default","d-block"],[1,"float-end","text-danger",3,"routerLink"],[1,"input-group"],["autocomplete","","formControlName","password","required","","id","signin-password","placeholder","password",1,"form-control","form-control-lg",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-light",3,"click"],[1,"mt-2"],[1,"form-check"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input"],["for","defaultCheck1",1,"form-check-label","text-muted","fw-normal"],[1,"col-xl-12","d-grid","mt-2"],["type","submit","autofocus","",3,"disabled"],["type","text","id","signin-username","placeholder","user name","formControlName","username","autocomplete","",1,"form-control","mb-3"],["formControlName","password","autocomplete","","id","signin-password","placeholder","password",1,"form-control",3,"type"],["type","submit",1,"btn","btn-lg","btn-primary",3,"disabled"]],template:function(e,r){if(e&1){let o=C();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),m(5,"img",6),n()(),t(6,"ul",7,0),M("activeIdChange",function(w){return d(o),E(r.active,w)||(r.active=w),g(w)}),t(8,"li",8)(9,"a",9),m(10,"img",10),n(),_(11,Fe,24,17,"ng-template",11),n(),t(12,"li",12)(13,"a",9),m(14,"img",13),n(),_(15,Ee,24,9,"ng-template",14),n()(),t(16,"div",15)(17,"div",16)(18,"p",17),l(19,"Sign In"),n(),t(20,"p",18),l(21,"Welcome back Jhon !"),n(),m(22,"div",19)(23,"div",20),t(24,"div",21)(25,"p",22),l(26," Dont have an account? "),t(27,"a",23),l(28,"Sign Up"),n()()(),t(29,"div",24)(30,"span"),l(31,"OR"),n()(),t(32,"div",25)(33,"button",26),m(34,"i",27),n(),t(35,"button",26),m(36,"i",28),n(),t(37,"button",26),m(38,"i",29),n()()()()()()()}if(e&2){let o=B(7);s(4),u("routerLink",b(4,Se)),s(2),F("activeId",r.active),s(17),u("ngbNavOutlet",o),s(4),u("routerLink",b(5,_e))}},dependencies:[z,q,te,Q,J,H,K,$,ie,X,Y,ue,re,ae,oe,ne,le,se,me,k,L,I,V]})};export{fe as LoginComponent};
